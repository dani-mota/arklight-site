<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arklight Project â€” Arklight Cognitive Dani Test Index (ACI)</title>
    <style>
        :root {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --bg-tertiary: #111111;
            --bg-card: #0d0d0d;
            --bg-hover: #141414;
            --bg-elevated: #1a1a1a;
            --border-primary: rgba(255, 255, 255, 0.08);
            --border-secondary: rgba(255, 255, 255, 0.12);
            --border-hover: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.4);
            --text-dim: rgba(255, 255, 255, 0.25);
            --accent-primary: #ffffff;
            --accent-blue: #3b82f6;
            --accent-green: #22c55e;
            --accent-yellow: #eab308;
            --accent-red: #ef4444;
            --glow-white: rgba(255, 255, 255, 0.05);
            --font-sans: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Inter', sans-serif;
            --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            --transition-fast: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-medium: 400ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 600ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        ::selection {
            background: rgba(255, 255, 255, 0.2);
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        /* Layout */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-primary);
            padding: 0 48px;
            height: 72px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 28px;
            height: 28px;
        }

        .logo-icon svg {
            width: 100%;
            height: 100%;
        }

        .logo-text {
            font-size: 15px;
            font-weight: 500;
            letter-spacing: 0.02em;
            color: var(--text-primary);
            text-transform: uppercase;
        }

        .demo-badge {
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 4px 10px;
            background: transparent;
            color: var(--text-muted);
            border: 1px solid var(--border-primary);
            border-radius: 2px;
        }

        .nav-tabs {
            display: flex;
            gap: 8px;
        }

        .nav-tab {
            padding: 10px 20px;
            font-size: 13px;
            font-weight: 400;
            letter-spacing: 0.02em;
            color: var(--text-muted);
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .nav-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 20px;
            right: 20px;
            height: 1px;
            background: var(--text-primary);
            transform: scaleX(0);
            transition: transform var(--transition-fast);
        }

        .nav-tab:hover {
            color: var(--text-secondary);
        }

        .nav-tab.active {
            color: var(--text-primary);
        }

        .nav-tab.active::after {
            transform: scaleX(1);
        }

        .nav-tab:focus {
            outline: none;
        }

        .nav-tab:focus-visible {
            outline: 1px solid var(--text-muted);
            outline-offset: 4px;
        }

        /* Main content */
        .main-content {
            flex: 1;
            padding: 120px 48px 80px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* View containers */
        .view {
            display: none;
            animation: fadeIn var(--transition-medium);
        }

        .view.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 80px 0 100px;
            position: relative;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 800px;
            height: 600px;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.03) 0%, transparent 70%);
            pointer-events: none;
        }

        .hero-eyebrow {
            font-size: 12px;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .hero-title {
            font-size: clamp(48px, 8vw, 72px);
            font-weight: 600;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 24px;
            position: relative;
        }

        .hero-subtitle {
            font-size: 18px;
            font-weight: 400;
            color: var(--text-secondary);
            margin-bottom: 48px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.7;
        }

        /* Impact Strip */
        .impact-strip {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1px;
            background: var(--border-primary);
            margin: 80px 0;
            border: 1px solid var(--border-primary);
        }

        .impact-card {
            background: var(--bg-primary);
            padding: 48px 24px;
            text-align: center;
            transition: background var(--transition-fast);
        }

        .impact-card:hover {
            background: var(--bg-secondary);
        }

        .impact-value {
            font-size: 48px;
            font-weight: 300;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
            font-variant-numeric: tabular-nums;
        }

        .impact-label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            line-height: 1.5;
        }

        .impact-context {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 16px;
            text-align: left;
        }

        .demo-disclaimer {
            font-size: 11px;
            color: var(--text-dim);
            text-align: center;
            margin-top: 24px;
            letter-spacing: 0.05em;
        }

        .section-handoff {
            font-size: 11px;
            color: var(--text-muted);
            text-align: center;
            margin: 24px 0 40px;
        }

        /* Section Headers */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-primary);
        }

        .section-title {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }

        /* Controls */
        .controls-bar {
            display: flex;
            align-items: center;
            gap: 32px;
            margin-bottom: 40px;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-primary);
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .control-label {
            font-size: 11px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        select, input[type="text"] {
            background: transparent;
            border: 1px solid var(--border-primary);
            color: var(--text-primary);
            padding: 10px 16px;
            font-size: 13px;
            font-family: var(--font-sans);
            cursor: pointer;
            transition: all var(--transition-fast);
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 36px;
            min-width: 180px;
        }

        select:hover, input[type="text"]:hover {
            border-color: var(--border-hover);
        }

        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--text-muted);
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--text-primary);
            cursor: pointer;
        }

        /* Candidate Table */
        .candidate-table {
            width: 100%;
            border-collapse: collapse;
        }

        .candidate-table th,
        .candidate-table td {
            padding: 20px 24px;
            text-align: left;
            border-bottom: 1px solid var(--border-primary);
        }

        .candidate-table th {
            font-size: 10px;
            font-weight: 500;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            cursor: pointer;
            transition: color var(--transition-fast);
            user-select: none;
            background: transparent;
        }

        .candidate-table th:hover {
            color: var(--text-muted);
        }

        .candidate-table th.sorted {
            color: var(--text-primary);
        }

        .candidate-table th .sort-indicator {
            margin-left: 6px;
            opacity: 0.4;
            font-size: 8px;
        }

        .candidate-table th.sorted .sort-indicator {
            opacity: 1;
        }

        .candidate-table tbody tr {
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .candidate-table tbody tr:hover {
            background: var(--bg-secondary);
        }

        .candidate-name {
            font-weight: 500;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .candidate-id {
            font-family: var(--font-mono);
            font-size: 11px;
            color: var(--text-dim);
            letter-spacing: 0.02em;
        }

        .candidate-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .candidate-status.complete .status-dot {
            background: var(--accent-green);
        }

        .candidate-status.in-progress .status-dot {
            background: var(--accent-yellow);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        .role-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .role-chip {
            font-size: 10px;
            padding: 4px 10px;
            background: transparent;
            border: 1px solid var(--border-primary);
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .role-chip.primary {
            border-color: var(--text-muted);
            color: var(--text-secondary);
        }

        .score-cell {
            font-family: var(--font-mono);
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        .score-cell.elite { color: var(--text-primary); }
        .score-cell.strong { color: var(--text-secondary); }
        .score-cell.developing { color: var(--text-muted); }
        .score-cell.concern { color: var(--accent-red); }

        /* Score Badge */
        .score-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 48px;
            padding: 6px 12px;
            font-family: var(--font-mono);
            font-size: 14px;
            font-weight: 400;
            border: 1px solid var(--border-primary);
        }

        .score-badge.elite {
            border-color: var(--text-secondary);
            color: var(--text-primary);
        }

        .score-badge.strong {
            color: var(--text-secondary);
        }

        .score-badge.developing {
            color: var(--text-muted);
        }

        /* Candidate Detail View */
        .detail-back {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-muted);
            background: none;
            border: none;
            cursor: pointer;
            margin-bottom: 48px;
            padding: 0;
            transition: color var(--transition-fast);
            letter-spacing: 0.02em;
        }

        .detail-back:hover {
            color: var(--text-primary);
        }

        .detail-header {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 80px;
            padding-bottom: 60px;
            margin-bottom: 60px;
            border-bottom: 1px solid var(--border-primary);
        }

        .detail-candidate-info {
            max-width: 600px;
        }

        .detail-candidate-name {
            font-size: 48px;
            font-weight: 500;
            letter-spacing: -0.02em;
            margin-bottom: 16px;
        }

        .detail-candidate-meta {
            display: flex;
            align-items: center;
            gap: 24px;
            color: var(--text-muted);
            font-size: 13px;
            margin-bottom: 20px;
        }

        .detail-candidate-meta .divider {
            width: 1px;
            height: 12px;
            background: var(--border-secondary);
        }

        .detail-candidate-background {
            color: var(--text-secondary);
            font-size: 15px;
            line-height: 1.7;
        }

        .detail-aci-score {
            text-align: right;
            padding-left: 80px;
            border-left: 1px solid var(--border-primary);
        }

        .detail-aci-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 16px;
        }

        .detail-aci-value {
            font-size: 96px;
            font-weight: 300;
            line-height: 1;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
            font-variant-numeric: tabular-nums;
        }

        .detail-aci-percentile {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        .detail-aci-band {
            display: inline-block;
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            padding: 6px 16px;
            border: 1px solid var(--border-secondary);
        }

        /* Executive Summary */
        .detail-summary-grid {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 40px;
            margin-bottom: 60px;
        }

        .summary-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .summary-row {
            display: grid;
            grid-template-columns: 220px 1fr;
            gap: 24px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-primary);
        }

        .summary-row:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .summary-value {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .summary-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .summary-list li {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .detail-aci-microcopy {
            margin-top: 12px;
            font-size: 11px;
            color: var(--text-muted);
            line-height: 1.5;
            display: grid;
            gap: 6px;
        }

        .role-selector {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .role-fit-grid {
            margin-bottom: 20px;
        }

        .role-fit-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 16px;
        }

        .detail-section {
            margin-bottom: 40px;
        }

        .chart-note {
            margin-top: 20px;
            font-size: 12px;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .radar-callouts {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .radar-callout {
            border: 1px solid var(--border-primary);
            padding: 12px 16px;
        }

        .callout-label {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            margin-bottom: 6px;
        }

        .callout-value {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .validation-role {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        .validation-list {
            display: grid;
            gap: 20px;
        }

        .validation-item {
            border-top: 1px solid var(--border-primary);
            padding-top: 20px;
        }

        .validation-item:first-child {
            border-top: none;
            padding-top: 0;
        }

        .validation-item-title {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 12px;
        }

        .validation-row {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 16px;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-primary);
        }

        .validation-row:last-child {
            border-bottom: none;
        }

        .validation-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .validation-value {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .onboarding-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 24px;
        }

        .onboarding-title {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 12px;
        }

        .onboarding-weeks {
            display: grid;
            gap: 10px;
        }

        .onboarding-week {
            border: 1px solid var(--border-primary);
            padding: 10px 12px;
        }

        .week-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 6px;
        }

        .week-text {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .benchmark-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 24px;
        }

        .benchmark-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .benchmark-value {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .onboarding-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .onboarding-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .onboarding-dot.accelerated { background: var(--accent-green); }
        .onboarding-dot.standard { background: var(--text-muted); }
        .onboarding-dot.structured-support { background: var(--accent-yellow); }

        /* Composite Scores Grid */
        .composites-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1px;
            background: var(--border-primary);
            margin-bottom: 80px;
            border: 1px solid var(--border-primary);
        }

        .composite-card {
            background: var(--bg-primary);
            padding: 40px 24px;
            transition: background var(--transition-fast);
        }

        .composite-card:hover {
            background: var(--bg-secondary);
        }

        .composite-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 16px;
            line-height: 1.4;
        }

        .composite-value {
            font-size: 36px;
            font-weight: 300;
            margin-bottom: 4px;
            letter-spacing: -0.01em;
            font-variant-numeric: tabular-nums;
        }

        .composite-percentile {
            font-size: 12px;
            color: var(--text-muted);
        }

        .composite-band {
            display: inline-block;
            margin-top: 12px;
            font-size: 9px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 4px 10px;
            border: 1px solid var(--border-primary);
            color: var(--text-muted);
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 60px;
            margin-bottom: 80px;
        }

        .chart-container {
            padding: 40px;
            border: 1px solid var(--border-primary);
        }

        .chart-container.full-width {
            grid-column: 1 / -1;
        }

        .chart-title {
            font-size: 10px;
            font-weight: 500;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 32px;
        }

        .radar-chart {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .radar-axis {
            stroke-width: 1;
            opacity: 0.35;
        }

        .radar-axis.category-cognitive { stroke: var(--accent-blue); }
        .radar-axis.category-technical { stroke: var(--accent-green); }
        .radar-axis.category-integrity { stroke: var(--accent-yellow); }

        .radar-label {
            opacity: 0.8;
        }

        .radar-label.category-cognitive { fill: var(--accent-blue); }
        .radar-label.category-technical { fill: var(--accent-green); }
        .radar-label.category-integrity { fill: var(--accent-yellow); }

        .radar-point {
            opacity: 0.9;
        }

        .radar-point.category-cognitive { fill: var(--accent-blue); }
        .radar-point.category-technical { fill: var(--accent-green); }
        .radar-point.category-integrity { fill: var(--accent-yellow); }

        .radar-tooltip {
            position: absolute;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            color: var(--text-secondary);
            font-size: 12px;
            line-height: 1.6;
            padding: 12px 14px;
            max-width: 240px;
            border-radius: 10px;
            opacity: 0;
            transition: opacity var(--transition-fast);
            pointer-events: none;
        }

        .radar-tooltip-title {
            font-weight: 600;
            margin-bottom: 6px;
        }

        .radar-tooltip-body {
            font-weight: 400;
        }

        .radar-tooltip-line {
            margin: 0;
        }

        .radar-legend {
            margin-top: 24px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }

        .radar-legend-item {
            border: 1px solid var(--border-primary);
            padding: 12px 16px;
        }

        .radar-legend-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .radar-legend-swatch {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }

        .radar-legend-swatch.cognitive { background: var(--accent-blue); }
        .radar-legend-swatch.technical { background: var(--accent-green); }
        .radar-legend-swatch.integrity { background: var(--accent-yellow); }

        .radar-legend-title {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .radar-legend-text {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Horizontal Bar Chart */
        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .bar-item {
            display: grid;
            grid-template-columns: 160px 1fr 60px;
            align-items: center;
            gap: 20px;
        }

        .bar-label {
            font-size: 12px;
            color: var(--text-muted);
            text-align: right;
        }

        .bar-track {
            height: 2px;
            background: var(--border-primary);
            position: relative;
        }

        .bar-fill {
            height: 100%;
            background: var(--text-primary);
            transition: width var(--transition-slow);
            position: relative;
        }

        .bar-fill::after {
            content: '';
            position: absolute;
            right: 0;
            top: -4px;
            width: 2px;
            height: 10px;
            background: var(--text-primary);
        }

        .bar-fill.elite { background: var(--text-primary); }
        .bar-fill.elite::after { background: var(--text-primary); }
        .bar-fill.strong { background: var(--text-secondary); }
        .bar-fill.strong::after { background: var(--text-secondary); }
        .bar-fill.developing { background: var(--text-muted); }
        .bar-fill.developing::after { background: var(--text-muted); }
        .bar-fill.concern { background: var(--accent-red); }
        .bar-fill.concern::after { background: var(--accent-red); }

        .bar-percentile {
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Composite Domains */
        .domain-grid {
            display: grid;
            gap: 32px;
            margin-bottom: 80px;
        }

        .domain-header {
            margin-bottom: 24px;
        }

        .domain-title {
            font-size: 16px;
            font-weight: 500;
            letter-spacing: -0.01em;
            margin-bottom: 8px;
        }

        .domain-purpose {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .domain-table {
            border-top: 1px solid var(--border-primary);
        }

        .domain-row {
            display: grid;
            grid-template-columns: 180px 1.2fr 1.2fr 1.6fr;
            gap: 20px;
            padding: 16px 0;
            border-bottom: 1px solid var(--border-primary);
        }

        .domain-row.header {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .domain-row.header .domain-cell {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .domain-cell {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .domain-name {
            color: var(--text-primary);
            font-weight: 500;
        }

        .domain-summary {
            margin-top: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            padding: 16px 20px;
            background: var(--bg-secondary);
            border-left: 2px solid var(--border-secondary);
            line-height: 1.6;
        }

        /* Construct Sections */
        .construct-section {
            margin-bottom: 2px;
        }

        .construct-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 24px 32px;
            background: var(--bg-secondary);
            cursor: pointer;
            transition: background var(--transition-fast);
            border: 1px solid var(--border-primary);
            border-bottom: none;
        }

        .construct-section:first-child .construct-section-header {
            border-top: 1px solid var(--border-primary);
        }

        .construct-section-header:hover {
            background: var(--bg-tertiary);
        }

        .construct-section-title {
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .construct-section-count {
            font-size: 12px;
            color: var(--text-dim);
            font-weight: 400;
        }

        .construct-section-toggle {
            color: var(--text-dim);
            font-size: 10px;
            transition: transform var(--transition-fast);
        }

        .construct-section.expanded .construct-section-toggle {
            transform: rotate(180deg);
        }

        .construct-cards {
            display: none;
            border: 1px solid var(--border-primary);
            border-top: none;
        }

        .construct-section.expanded .construct-cards {
            display: block;
        }

        /* Construct Card */
        .construct-card {
            padding: 28px 32px;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-primary);
            transition: background var(--transition-fast);
        }

        .construct-card:last-child {
            border-bottom: none;
        }

        .construct-card:hover {
            background: var(--bg-secondary);
        }

        .construct-card-header {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 40px;
            cursor: pointer;
        }

        .construct-info {
            min-width: 0;
        }

        .construct-name {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .construct-abbr {
            font-family: var(--font-mono);
            font-size: 10px;
            color: var(--text-dim);
            letter-spacing: 0.05em;
        }

        .construct-predicts {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .construct-measures {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .construct-operational {
            font-size: 12px;
            color: var(--text-dim);
        }

        .construct-scores {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .construct-score-main {
            text-align: right;
        }

        .construct-score-value {
            font-family: var(--font-mono);
            font-size: 28px;
            font-weight: 300;
            letter-spacing: -0.01em;
        }

        .construct-score-label {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .construct-score-secondary {
            text-align: right;
            min-width: 80px;
        }

        .construct-percentile {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--text-muted);
        }

        .construct-ci {
            font-size: 11px;
            color: var(--text-dim);
        }

        .construct-expand-btn {
            background: none;
            border: 1px solid var(--border-primary);
            color: var(--text-dim);
            cursor: pointer;
            padding: 8px 12px;
            font-size: 10px;
            transition: all var(--transition-fast);
        }

        .construct-expand-btn:hover {
            border-color: var(--text-muted);
            color: var(--text-muted);
        }

        /* Evidence Panel */
        .construct-evidence {
            display: none;
            margin-top: 28px;
            padding-top: 28px;
            border-top: 1px solid var(--border-primary);
            animation: slideDown var(--transition-medium);
        }

        .construct-card.evidence-open .construct-evidence {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .evidence-section {
            margin-bottom: 28px;
        }

        .evidence-section:last-child {
            margin-bottom: 0;
        }

        .evidence-label {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 12px;
        }

        .evidence-scenario {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
            padding: 20px 24px;
            background: var(--bg-secondary);
            border-left: 2px solid var(--border-secondary);
        }

        .evidence-transcript {
            background: var(--bg-secondary);
        }

        .transcript-turn {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-primary);
        }

        .transcript-turn:last-child {
            border-bottom: none;
        }

        .transcript-speaker {
            font-size: 9px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .transcript-speaker.system {
            color: var(--text-muted);
        }

        .transcript-speaker.candidate {
            color: var(--text-primary);
        }

        .transcript-content {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .transcript-timestamp {
            font-size: 11px;
            color: var(--text-dim);
            font-family: var(--font-mono);
            margin-top: 8px;
        }

        .evidence-rationale {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
            padding: 20px 24px;
            background: var(--bg-secondary);
        }

        .evidence-indicators {
            display: flex;
            gap: 24px;
        }

        .indicator-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
            color: var(--text-muted);
            padding: 12px 20px;
            background: var(--bg-secondary);
        }

        .indicator-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .indicator-dot.high { background: var(--accent-red); }
        .indicator-dot.medium { background: var(--accent-yellow); }
        .indicator-dot.low { background: var(--accent-green); }

        .standardization-note {
            font-size: 12px;
            color: var(--text-muted);
            padding: 16px 20px;
            background: var(--bg-secondary);
            border-left: 2px solid var(--border-secondary);
            line-height: 1.6;
        }

        .evidence-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: grid;
            gap: 10px;
        }

        .evidence-list li {
            font-size: 13px;
            color: var(--text-secondary);
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-left: 2px solid var(--border-secondary);
            line-height: 1.6;
        }

        /* Role Cutlines */
        .cutlines-container {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 1px;
            background: var(--border-primary);
            border: 1px solid var(--border-primary);
        }

        .cutlines-roles {
            background: var(--bg-primary);
        }

        .cutlines-role-item {
            padding: 24px 28px;
            border-bottom: 1px solid var(--border-primary);
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .cutlines-role-item:last-child {
            border-bottom: none;
        }

        .cutlines-role-item:hover {
            background: var(--bg-secondary);
        }

        .cutlines-role-item.selected {
            background: var(--bg-tertiary);
        }

        .cutlines-role-name {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 6px;
        }

        .cutlines-role-count {
            font-size: 12px;
            color: var(--text-dim);
        }

        .cutlines-detail {
            background: var(--bg-primary);
            padding: 40px;
        }

        .cutlines-detail h3 {
            font-size: 24px;
            font-weight: 500;
            letter-spacing: -0.01em;
            margin-bottom: 32px;
        }

        .cutlines-requirements {
            margin-bottom: 40px;
        }

        .requirement-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid var(--border-primary);
        }

        .requirement-item:last-child {
            border-bottom: none;
        }

        .requirement-construct {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .requirement-threshold {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--text-muted);
        }

        .cutlines-candidates {
            border-top: 1px solid var(--border-primary);
            padding-top: 32px;
        }

        .cutline-candidate-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid var(--border-primary);
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .cutline-candidate-row:hover {
            background: var(--bg-secondary);
            margin: 0 -20px;
            padding-left: 20px;
            padding-right: 20px;
        }

        .cutline-candidate-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .cutline-status-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .cutline-status-icon.pass {
            color: var(--accent-green);
        }

        .cutline-status-icon.fail {
            color: var(--text-dim);
        }

        .cutline-candidate-name {
            font-weight: 400;
            font-size: 14px;
        }

        .cutline-score {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--text-muted);
        }

        /* Fit Explanation */
        .fit-explanation {
            margin-top: 40px;
            padding: 32px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
        }

        .fit-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 24px;
        }

        .fit-section {
            margin-bottom: 24px;
        }

        .fit-section:last-child {
            margin-bottom: 0;
        }

        .fit-section-label {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 12px;
        }

        .fit-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .fit-item .icon {
            flex-shrink: 0;
            margin-top: 2px;
            font-size: 10px;
        }

        .fit-item.driver .icon { color: var(--accent-green); }
        .fit-item.risk .icon { color: var(--accent-yellow); }

        /* Heatmap */
        .heatmap-container {
            overflow-x: auto;
            margin-bottom: 60px;
        }

        .heatmap-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }

        .heatmap-table th,
        .heatmap-table td {
            padding: 12px 8px;
            text-align: center;
            border: 1px solid var(--border-primary);
        }

        .heatmap-table th {
            background: var(--bg-secondary);
            font-weight: 500;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 9px;
        }

        .heatmap-table th.rotate {
            writing-mode: vertical-lr;
            text-orientation: mixed;
            transform: rotate(180deg);
            height: 80px;
            padding: 8px 4px;
        }

        .heatmap-table td.candidate-col {
            text-align: left;
            font-weight: 500;
            font-size: 12px;
            background: var(--bg-secondary);
            white-space: nowrap;
            padding-left: 16px;
        }

        .heatmap-cell {
            font-family: var(--font-mono);
            font-weight: 400;
            font-size: 11px;
        }

        /* Footer */
        .footer {
            padding: 40px 48px;
            border-top: 1px solid var(--border-primary);
            text-align: center;
        }

        .footer-disclaimer {
            font-size: 11px;
            color: var(--text-dim);
            margin-bottom: 12px;
            padding: 12px 24px;
            display: inline-block;
            border: 1px solid var(--border-primary);
            letter-spacing: 0.02em;
        }

        .footer p {
            font-size: 11px;
            color: var(--text-dim);
            letter-spacing: 0.05em;
        }

        /* Overview Grid */
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));
            gap: 1px;
            background: var(--border-primary);
            border: 1px solid var(--border-primary);
        }

        .overview-card {
            background: var(--bg-primary);
            padding: 32px;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .overview-card:hover {
            background: var(--bg-secondary);
        }

        .overview-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .overview-card-name {
            font-weight: 500;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .overview-card-id {
            font-size: 11px;
            color: var(--text-dim);
            font-family: var(--font-mono);
        }

        .overview-card-score {
            text-align: right;
        }

        .overview-card-value {
            font-size: 32px;
            font-weight: 300;
            letter-spacing: -0.02em;
        }

        .overview-card-band {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .overview-card-roles {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .cutlines-container {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .composites-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .impact-strip {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 900px) {
            .header {
                padding: 0 24px;
                height: 64px;
            }

            .main-content {
                padding: 100px 24px 60px;
            }

            .detail-header {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .detail-aci-score {
                text-align: left;
                padding-left: 0;
                border-left: none;
                padding-top: 40px;
                border-top: 1px solid var(--border-primary);
            }

            .detail-summary-grid {
                grid-template-columns: 1fr;
                gap: 24px;
                margin-bottom: 40px;
            }

            .summary-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .validation-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .role-fit-text {
                font-size: 13px;
            }

            .chart-note {
                font-size: 11px;
            }

            .radar-callouts {
                grid-template-columns: 1fr;
            }

            .domain-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .domain-row.header {
                display: none;
            }

            .domain-summary {
                padding: 12px 16px;
            }

            .composites-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .bar-item {
                grid-template-columns: 100px 1fr 40px;
                gap: 12px;
            }

            .bar-label {
                font-size: 11px;
            }

            .impact-strip {
                grid-template-columns: repeat(2, 1fr);
            }

            .controls-bar {
                flex-wrap: wrap;
                gap: 16px;
            }

            .control-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
            }

            select {
                min-width: 160px;
            }
        }

        @media (max-width: 700px) {
            /* Header */
            .header {
                flex-direction: column;
                height: auto;
                padding: 16px 20px;
                gap: 12px;
            }

            .logo-section {
                width: 100%;
                justify-content: space-between;
            }

            .nav-tabs {
                width: 100%;
                justify-content: flex-start;
                gap: 0;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .nav-tabs::-webkit-scrollbar {
                display: none;
            }

            .nav-tab {
                padding: 8px 16px;
                font-size: 12px;
                white-space: nowrap;
                flex-shrink: 0;
            }

            /* Main content */
            .main-content {
                padding: 130px 16px 40px;
            }

            /* Hero */
            .hero {
                padding: 40px 0 60px;
            }

            .hero-eyebrow {
                font-size: 10px;
                margin-bottom: 16px;
            }

            .hero-title {
                font-size: 32px;
                margin-bottom: 16px;
            }

            .hero-subtitle {
                font-size: 15px;
                margin-bottom: 32px;
                padding: 0 8px;
            }

            /* Impact strip */
            .impact-strip {
                grid-template-columns: 1fr 1fr;
                margin: 40px 0;
            }

            .impact-card {
                padding: 24px 16px;
            }

            .impact-value {
                font-size: 32px;
            }

            .impact-label {
                font-size: 9px;
            }

            /* Section headers */
            .section-header {
                margin-bottom: 24px;
                padding-bottom: 16px;
            }

            /* Controls */
            .controls-bar {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
                padding: 16px 0;
                margin-bottom: 24px;
            }

            .control-group {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }

            select {
                flex: 1;
                min-width: 0;
                max-width: 200px;
            }

            .checkbox-label {
                font-size: 12px;
            }

            /* Candidate table - convert to cards on mobile */
            .candidate-table {
                display: block;
            }

            .candidate-table thead {
                display: none;
            }

            .candidate-table tbody {
                display: flex;
                flex-direction: column;
                gap: 1px;
                background: var(--border-primary);
            }

            .candidate-table tbody tr {
                display: grid;
                grid-template-columns: 1fr auto;
                grid-template-rows: auto auto auto;
                gap: 8px 16px;
                padding: 20px;
                background: var(--bg-primary);
            }

            .candidate-table tbody tr td {
                padding: 0;
                border: none;
            }

            .candidate-table tbody tr td:nth-child(1) {
                grid-column: 1;
                grid-row: 1;
            }

            .candidate-table tbody tr td:nth-child(2) {
                grid-column: 2;
                grid-row: 1;
                justify-self: end;
            }

            .candidate-table tbody tr td:nth-child(3) {
                grid-column: 1 / -1;
                grid-row: 2;
            }

            /* Hide extra score columns on mobile, show only ACI */
            .candidate-table tbody tr td:nth-child(5),
            .candidate-table tbody tr td:nth-child(6),
            .candidate-table tbody tr td:nth-child(7) {
                display: none;
            }

            .candidate-table tbody tr td:nth-child(4) {
                grid-column: 2;
                grid-row: 1 / 3;
                display: flex;
                align-items: center;
                justify-content: flex-end;
            }

            .candidate-table tbody tr td:nth-child(4) .score-cell {
                font-size: 28px;
                font-weight: 300;
            }

            .candidate-name {
                font-size: 16px;
            }

            .candidate-id {
                font-size: 10px;
            }

            .role-chips {
                margin-top: 4px;
            }

            /* Detail view */
            .detail-back {
                margin-bottom: 24px;
                font-size: 12px;
            }

            .detail-header {
                padding-bottom: 32px;
                margin-bottom: 32px;
                gap: 24px;
            }

            .detail-candidate-name {
                font-size: 28px;
                margin-bottom: 12px;
            }

            .detail-candidate-meta {
                flex-wrap: wrap;
                gap: 8px 16px;
                font-size: 11px;
                margin-bottom: 12px;
            }

            .detail-candidate-meta .divider {
                display: none;
            }

            .detail-candidate-meta > span,
            .detail-candidate-meta > .candidate-status,
            .detail-candidate-meta > .onboarding-indicator {
                padding: 4px 0;
            }

            .detail-candidate-background {
                font-size: 14px;
            }

            .detail-aci-score {
                padding-top: 24px;
            }

            .detail-aci-value {
                font-size: 56px;
            }

            .detail-aci-percentile {
                font-size: 13px;
            }

            .summary-label {
                font-size: 9px;
            }

            .summary-value {
                font-size: 13px;
            }

            .domain-title {
                font-size: 15px;
            }

            .domain-cell {
                font-size: 12px;
            }

            .domain-summary {
                font-size: 12px;
            }

            /* Composites grid */
            .composites-grid {
                grid-template-columns: 1fr 1fr;
                margin-bottom: 40px;
            }

            .composite-card {
                padding: 24px 16px;
            }

            .composite-label {
                font-size: 9px;
                margin-bottom: 12px;
            }

            .composite-value {
                font-size: 28px;
            }

            .composite-percentile {
                font-size: 11px;
            }

            /* Charts */
            .charts-grid {
                gap: 24px;
                margin-bottom: 40px;
            }

            .chart-container {
                padding: 24px 16px;
            }

            .chart-title {
                margin-bottom: 20px;
            }

            .radar-chart svg {
                max-width: 280px;
                max-height: 280px;
            }

            .bar-item {
                grid-template-columns: 1fr;
                gap: 6px;
            }

            .bar-label {
                text-align: left;
                font-size: 11px;
            }

            .bar-track {
                order: 1;
            }

            .bar-percentile {
                position: absolute;
                right: 0;
                top: 0;
                font-size: 11px;
            }

            .bar-item {
                position: relative;
                padding-right: 40px;
            }

            /* Construct sections */
            .construct-section-header {
                padding: 16px 20px;
            }

            .construct-section-title {
                font-size: 13px;
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }

            .construct-card {
                padding: 20px;
            }

            .construct-card-header {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .construct-name {
                font-size: 13px;
                flex-wrap: wrap;
            }

            .construct-measures {
                font-size: 12px;
            }

            .construct-predicts {
                font-size: 12px;
            }

            .construct-operational {
                font-size: 11px;
            }

            .construct-scores {
                justify-content: space-between;
                padding-top: 12px;
                border-top: 1px solid var(--border-primary);
            }

            .construct-score-value {
                font-size: 24px;
            }

            .construct-score-secondary {
                text-align: left;
            }

            /* Evidence panel */
            .construct-evidence {
                margin-top: 20px;
                padding-top: 20px;
            }

            .evidence-section {
                margin-bottom: 20px;
            }

            .evidence-scenario,
            .evidence-rationale {
                padding: 16px;
                font-size: 13px;
            }

            .transcript-turn {
                padding: 16px;
            }

            .transcript-content {
                font-size: 13px;
            }

            .evidence-indicators {
                flex-direction: column;
                gap: 8px;
            }

            .indicator-item {
                padding: 10px 16px;
                font-size: 11px;
            }

            .evidence-list li {
                font-size: 12px;
                padding: 10px 12px;
            }

            .standardization-note {
                padding: 12px 16px;
                font-size: 11px;
            }

            /* Cutlines */
            .cutlines-container {
                display: flex;
                flex-direction: column;
                gap: 0;
                border: none;
                background: transparent;
            }

            .cutlines-roles {
                display: flex;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                gap: 1px;
                background: var(--border-primary);
                border: 1px solid var(--border-primary);
                margin-bottom: 24px;
            }

            .cutlines-role-item {
                flex-shrink: 0;
                padding: 16px 20px;
                min-width: 160px;
                border-bottom: none;
            }

            .cutlines-role-item.selected {
                background: var(--bg-tertiary);
            }

            .cutlines-role-name {
                font-size: 13px;
                white-space: nowrap;
            }

            .cutlines-role-count {
                font-size: 11px;
            }

            .cutlines-detail {
                padding: 24px 20px;
                border: 1px solid var(--border-primary);
            }

            .cutlines-detail h3 {
                font-size: 20px;
                margin-bottom: 24px;
            }

            .requirement-item {
                padding: 12px 0;
            }

            .requirement-construct {
                font-size: 13px;
            }

            .cutline-candidate-row {
                padding: 12px 0;
            }

            .cutline-candidate-name {
                font-size: 14px;
            }

            .fit-explanation {
                margin-top: 24px;
                padding: 20px;
            }

            .fit-title {
                font-size: 13px;
            }

            .fit-item {
                font-size: 12px;
            }

            /* Heatmap */
            .heatmap-container {
                margin: 0 -16px;
                padding: 0 16px;
            }

            .heatmap-table {
                font-size: 9px;
            }

            .heatmap-table th,
            .heatmap-table td {
                padding: 8px 4px;
            }

            .heatmap-table th.rotate {
                height: 60px;
                font-size: 8px;
            }

            .heatmap-table td.candidate-col {
                font-size: 10px;
                padding-left: 8px;
                max-width: 80px;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .heatmap-cell {
                font-size: 9px;
            }

            /* Overview grid */
            .overview-card {
                padding: 20px;
            }

            .overview-card-header {
                margin-bottom: 12px;
            }

            .overview-card-name {
                font-size: 14px;
            }

            .overview-card-id {
                font-size: 10px;
            }

            .overview-card-value {
                font-size: 24px;
            }

            /* Footer */
            .footer {
                padding: 24px 16px;
            }

            .footer-disclaimer {
                font-size: 10px;
                padding: 10px 16px;
            }

            .footer p {
                font-size: 10px;
            }
        }

        @media (max-width: 400px) {
            .main-content {
                padding: 120px 12px 32px;
            }

            .hero-title {
                font-size: 28px;
            }

            .impact-strip {
                grid-template-columns: 1fr;
            }

            .composites-grid {
                grid-template-columns: 1fr;
            }

            .detail-candidate-name {
                font-size: 24px;
            }

            .detail-aci-value {
                font-size: 48px;
            }

            .nav-tab {
                padding: 8px 12px;
                font-size: 11px;
            }
        }

        /* Touch-friendly tap targets */
        @media (hover: none) and (pointer: coarse) {
            .nav-tab {
                min-height: 44px;
                display: flex;
                align-items: center;
            }

            .candidate-table tbody tr {
                min-height: 80px;
            }

            .construct-section-header {
                min-height: 56px;
            }

            .cutlines-role-item {
                min-height: 60px;
            }

            .cutline-candidate-row {
                min-height: 48px;
            }

            select {
                min-height: 44px;
            }

            .checkbox-label {
                min-height: 44px;
            }
        }

        /* Utility Classes */
        .text-elite { color: var(--text-primary); }
        .text-strong { color: var(--text-secondary); }
        .text-developing { color: var(--text-muted); }
        .text-concern { color: var(--accent-red); }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="logo-section">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 1L26 7.5V20.5L14 27L2 20.5V7.5L14 1Z" stroke="white" stroke-width="1" fill="none"/>
                            <path d="M14 7L20 10.5V17.5L14 21L8 17.5V10.5L14 7Z" stroke="white" stroke-width="0.75" fill="none" opacity="0.5"/>
                            <circle cx="14" cy="14" r="2" fill="white"/>
                        </svg>
                    </div>
                    <span class="logo-text">Arklight Project</span>
                </div>
                <span class="demo-badge">Demo</span>
            </div>
            <nav class="nav-tabs" role="tablist" aria-label="Main navigation">
                <button class="nav-tab active" role="tab" aria-selected="true" data-view="overview" tabindex="0">Overview</button>
                <button class="nav-tab" role="tab" aria-selected="false" data-view="candidates" tabindex="-1">Candidates</button>
                <button class="nav-tab" role="tab" aria-selected="false" data-view="cutlines" tabindex="-1">Role Cutlines</button>
                <button class="nav-tab" role="tab" aria-selected="false" data-view="heatmap" tabindex="-1">Matrix</button>
            </nav>
        </header>

        <main class="main-content">
            <!-- Overview View -->
            <div id="view-overview" class="view active" role="tabpanel" aria-labelledby="tab-overview">
                <section class="hero">
                    <p class="hero-eyebrow">Next-Generation Assessment</p>
                    <h1 class="hero-title">Arklight Cognitive Index</h1>
                    <p class="hero-subtitle">
                        Combining military and intelligence psychological research with adaptive AI, the Arklight Cognitive Index quantifies aptitude, predicts learning velocity, reliability, and overall talent capability for industrial partners.
                    </p>
                </section>

                <p class="impact-context">Observed impact when ARC informs hiring and deployment decisions versus traditional screening.</p>
                <div class="impact-strip" aria-label="Impact metrics">
                    <div class="impact-card">
                        <div class="impact-value">47%</div>
                        <div class="impact-label">Lower 90-Day<br>Attrition</div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-value">2.3Ã—</div>
                        <div class="impact-label">Faster Time<br>to Mastery</div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-value">63%</div>
                        <div class="impact-label">Reduced False<br>Positives</div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-value">4.1Ã—</div>
                        <div class="impact-label">Integrity Flag<br>Detection</div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-value">89%</div>
                        <div class="impact-label">Hiring Manager<br>Confidence</div>
                    </div>
                </div>
                <p class="demo-disclaimer">Illustrative demo metrics</p>
                <p class="section-handoff">Select a candidate to view deployment guidance, ramp projections, and risk profile.</p>

                <section class="section-header">
                    <h2 class="section-title">Candidate Dashboard</h2>
                </section>

                <div id="overview-dashboard"></div>
            </div>

            <!-- Candidates View -->
            <div id="view-candidates" class="view" role="tabpanel" aria-labelledby="tab-candidates">
                <section class="section-header">
                    <h2 class="section-title">Assessment Results</h2>
                </section>

                <div class="controls-bar">
                    <div class="control-group">
                        <label class="control-label" for="sort-select">Sort</label>
                        <select id="sort-select">
                            <option value="aci">ACI Score</option>
                            <option value="cognitive">Cognitive Core</option>
                            <option value="technical">Technical Aptitude</option>
                            <option value="manufacturing">Manufacturing Technical</option>
                            <option value="learning">Learning Velocity</option>
                            <option value="reliability">Reliability Index</option>
                            <option value="integrity">Behavioral Integrity</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="role-filter">Role</label>
                        <select id="role-filter">
                            <option value="all">All Roles</option>
                            <option value="cnc-machinist">CNC Machinist (5-Axis)</option>
                            <option value="cnc-programmer">CNC Programmer</option>
                            <option value="mfg-systems">Manufacturing Systems Technician</option>
                            <option value="quality-metrology">Quality / Metrology Technician</option>
                            <option value="production-assembly">Production Assembly Technician</option>
                            <option value="automation-robotics">Automation &amp; Robotics Technician (Factory)</option>
                            <option value="mfg-engineer">Manufacturing Engineer (Production-Facing)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="cutline-filter">
                            <span>Meets cutline only</span>
                        </label>
                    </div>
                </div>

                <div id="candidates-table-container"></div>
            </div>

            <!-- Candidate Detail View -->
            <div id="view-candidate-detail" class="view" role="tabpanel">
                <button class="detail-back" id="back-to-candidates">
                    <span>â†</span> Back to Candidates
                </button>
                <div id="candidate-detail-content"></div>
            </div>

            <!-- Role Cutlines View -->
            <div id="view-cutlines" class="view" role="tabpanel" aria-labelledby="tab-cutlines">
                <section class="section-header">
                    <h2 class="section-title">Role Cutlines & Fit Analysis</h2>
                </section>
                <div id="cutlines-content"></div>
            </div>

            <!-- Heatmap View -->
            <div id="view-heatmap" class="view" role="tabpanel" aria-labelledby="tab-heatmap">
                <section class="section-header">
                    <h2 class="section-title">Comparison Matrix</h2>
                </section>
                <div id="heatmap-content"></div>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-disclaimer">
                All candidate data is synthetic for demonstration
            </div>
            <p>Project Arklight â€” ACI v2.4</p>
        </footer>
    </div>

    <script>
    (function() {
        'use strict';

        // ============================================================
        // DATA MODEL
        // ============================================================

        const CONSTRUCTS = {
            cognitive: [
                {
                    id: 'FI',
                    name: 'Fluid Intelligence',
                    measures: 'Abstract reasoning and novel problem solving without known templates.',
                    predicts: 'Novel problem-solving and rapid adaptation.',
                    matters: 'Enables rapid root-cause isolation when a process drifts or a new fixture is introduced.',
                    operationalValue: 'Reduces time to stabilize new setups and prevents scrap during first-article runs.',
                    development: [
                        'Improves with structured post-mortem reviews on unfamiliar failures.',
                        'Improves through cross-training on new cell layouts and tooling.'
                    ]
                },
                {
                    id: 'ER',
                    name: 'Extrapolational Reasoning',
                    measures: 'Projecting trends and downstream effects from partial signals.',
                    predicts: 'Anticipating outcomes and second-order effects.',
                    matters: 'Helps foresee tolerance stack issues before they hit inspection.',
                    operationalValue: 'Prevents late-stage scrap by predicting drift and compensating early.',
                    development: [
                        'Improves with exposure to SPC trend analysis and yield data.',
                        'Improves by practicing pre-mortem planning for process changes.'
                    ]
                },
                {
                    id: 'ICI',
                    name: 'Cognitive Interference Control',
                    measures: 'Maintaining attention and task priority amid distraction.',
                    predicts: 'Focus stability under interruption.',
                    matters: 'Protects critical steps during multi-alarm or high-traffic shifts.',
                    operationalValue: 'Reduces rework by preventing skipped or out-of-sequence steps.',
                    development: [
                        'Improves with standardized checklists and interruption protocols.',
                        'Improves with supervised operation under simulated alarm load.'
                    ]
                },
                {
                    id: 'MAC',
                    name: 'Metacognitive Accuracy',
                    measures: 'Accuracy of self-assessment and error awareness.',
                    predicts: 'Realistic confidence and calibration.',
                    matters: 'Prevents overconfident adjustments that drive out-of-spec parts.',
                    operationalValue: 'Increases first-pass yield by catching uncertainty early.',
                    development: [
                        'Improves with coached decision logs and after-action reviews.',
                        'Improves with peer calibration sessions on measurement calls.'
                    ]
                },
                {
                    id: 'TCDQ',
                    name: 'Time-Compressed Decision Quality',
                    measures: 'Decision quality under time pressure and ambiguity.',
                    predicts: 'Sound judgment when time is limited.',
                    matters: 'Determines safe responses during line stoppages or tool alarms.',
                    operationalValue: 'Shortens downtime without sacrificing safety or quality.',
                    development: [
                        'Improves with timed troubleshooting drills.',
                        'Improves with supervised escalation practice.'
                    ]
                },
                {
                    id: 'CMR',
                    name: 'Causal Misattribution Resistance',
                    measures: 'Resistance to false causal links and confirmation bias.',
                    predicts: 'Hypothesis discipline in diagnostics.',
                    matters: 'Prevents chasing the wrong root cause during failures.',
                    operationalValue: 'Cuts mean time to repair by avoiding false fixes.',
                    development: [
                        'Improves with structured fault-tree analysis.',
                        'Improves through exposure to counterfactual testing.'
                    ]
                },
                {
                    id: 'ERCS',
                    name: 'Error Recovery & Correction Speed',
                    measures: 'Speed of detecting and correcting errors.',
                    predicts: 'Recovery velocity after mistakes.',
                    matters: 'Limits propagation of errors across a production batch.',
                    operationalValue: 'Reduces scrap and rework during tight-tolerance runs.',
                    development: [
                        'Improves with closed-loop feedback and rapid correction cycles.',
                        'Improves through supervised decision authority on minor deviations.'
                    ]
                }
            ],
            technical: [
                {
                    id: 'SRD',
                    name: 'Systems Reasoning & Diagnostics',
                    measures: 'Systems reasoning across mechanical, electrical, and process interactions.',
                    predicts: 'Diagnostic accuracy in complex systems.',
                    matters: 'Core for isolating faults in integrated machining and inspection cells.',
                    operationalValue: 'Enables faster stabilization of multi-step manufacturing flows.',
                    development: [
                        'Improves with cross-functional training on machine subsystems.',
                        'Improves through guided fault-tree walkthroughs.'
                    ]
                },
                {
                    id: 'PRAD',
                    name: 'Pattern Recognition & Anomaly Detection',
                    measures: 'Detection of subtle deviations, drift, and anomalies.',
                    predicts: 'Early warning of quality or process instability.',
                    matters: 'Protects against out-of-tolerance drift before it hits final inspection.',
                    operationalValue: 'Improves yield by catching deviation in-process.',
                    development: [
                        'Improves with SPC trend review practice.',
                        'Improves with exposure to historical drift patterns.'
                    ]
                },
                {
                    id: 'TMAQ',
                    name: 'Technical Math & Quant Reasoning',
                    measures: 'Applied math for tolerances, rates, and measurement systems.',
                    predicts: 'Accuracy in calculating offsets, feeds, and inspection criteria.',
                    matters: 'Required for CMM programming, tolerance stackups, and SPC.',
                    operationalValue: 'Prevents measurement and setup errors that drive scrap.',
                    development: [
                        'Improves with fixture math and tolerance exercises.',
                        'Improves through supervised CMM program validation.'
                    ]
                },
                {
                    id: 'DLCT',
                    name: 'Digital Logic & Computational Thinking',
                    measures: 'Logic sequencing, conditional reasoning, and algorithmic thinking.',
                    predicts: 'PLC, robot, and CNC program reasoning.',
                    matters: 'Foundational for CAM post-processing and automation logic.',
                    operationalValue: 'Reduces downtime from program errors or mis-sequencing.',
                    development: [
                        'Improves with ladder logic walkthroughs and dry runs.',
                        'Improves by reviewing post-processor output with supervision.'
                    ]
                },
                {
                    id: 'SPV',
                    name: 'Spatial & Process Visualization',
                    measures: 'Spatial reasoning and process flow visualization.',
                    predicts: 'Ability to plan toolpaths and fixture orientations.',
                    matters: 'Enables effective 5-axis setup planning and inspection coverage.',
                    operationalValue: 'Reduces collisions and improves surface finish consistency.',
                    development: [
                        'Improves with 3D simulation review and setup shadowing.',
                        'Improves through fixture planning exercises.'
                    ]
                },
                {
                    id: 'ASWL',
                    name: 'Attention Stability Under Load',
                    measures: 'Sustained vigilance under load and repetition.',
                    predicts: 'Stability across long shifts and batch runs.',
                    matters: 'Critical for monitoring multi-hour machining cycles.',
                    operationalValue: 'Prevents missed alarms and unnoticed drift.',
                    development: [
                        'Improves with structured rotation and check cadence.',
                        'Improves through supervised long-cycle monitoring.'
                    ]
                },
                {
                    id: 'FIDS',
                    name: 'Fault Isolation & Debug Speed',
                    measures: 'Speed and accuracy of isolating fault sources.',
                    predicts: 'Time to repair and restart.',
                    matters: 'Reduces line downtime during unexpected stops.',
                    operationalValue: 'Improves OEE by shortening diagnosis cycles.',
                    development: [
                        'Improves with standardized troubleshooting trees.',
                        'Improves by practicing root-cause isolation drills.'
                    ]
                },
                {
                    id: 'ISI',
                    name: 'Information Security Instinct',
                    measures: 'Security instinct and access discipline.',
                    predicts: 'Resistance to social engineering and policy violations.',
                    matters: 'Protects IP and prevents unauthorized program changes.',
                    operationalValue: 'Reduces risk of compromised toolpaths or data loss.',
                    development: [
                        'Improves with incident debriefs and access-control drills.',
                        'Improves through supervised credential hygiene checks.'
                    ]
                },
                {
                    id: 'RRCP',
                    name: 'Reliability & Rules Compliance',
                    measures: 'Consistency and adherence to procedures.',
                    predicts: 'Reliability under SOPs and audits.',
                    matters: 'Maintains safety margins and quality compliance.',
                    operationalValue: 'Protects audit readiness and reduces variance.',
                    development: [
                        'Improves with checklist discipline and peer verification.',
                        'Improves through exposure to audit walk-throughs.'
                    ]
                }
            ],
            integrity: [
                {
                    id: 'VCS',
                    name: 'Values Conflict Scenarios',
                    measures: 'Ethical decision making under pressure.',
                    predicts: 'Willingness to uphold quality when rushed.',
                    matters: 'Prevents shortcuts during high-pressure production pushes.',
                    operationalValue: 'Protects brand and safety by keeping quality gates intact.',
                    development: [
                        'Improves with scenario-based ethics training.',
                        'Improves through reinforcement of stop-work authority.'
                    ]
                },
                {
                    id: 'BCC',
                    name: 'Behavioral Consistency Cross-Check',
                    measures: 'Consistency of responses across scenarios.',
                    predicts: 'Behavioral reliability and honesty.',
                    matters: 'Flags instability or impression management in critical roles.',
                    operationalValue: 'Improves trust in operator reporting and escalation.',
                    development: [
                        'Improves with coaching on transparent incident reporting.',
                        'Improves through consistent feedback loops.'
                    ]
                },
                {
                    id: 'MAI',
                    name: 'Mission Alignment Indicator',
                    measures: 'Alignment with mission and values.',
                    predicts: 'Long-term engagement and discretionary effort.',
                    matters: 'Predicts sustained commitment to quality and safety standards.',
                    operationalValue: 'Improves retention and adherence to mission-critical standards.',
                    development: [
                        'Improves with clear mission ownership and mentorship.',
                        'Improves by connecting work to mission outcomes.'
                    ]
                }
            ]
        };

        const ROLES = [
            { id: 'cnc-machinist', name: 'CNC Machinist (5-Axis)', abbr: 'CNC 5X' },
            { id: 'cnc-programmer', name: 'CNC Programmer', abbr: 'CNC Prog' },
            { id: 'mfg-systems', name: 'Manufacturing Systems Technician', abbr: 'Mfg Sys' },
            { id: 'quality-metrology', name: 'Quality / Metrology Technician', abbr: 'Quality' },
            { id: 'production-assembly', name: 'Production Assembly Technician', abbr: 'Assembly' },
            { id: 'automation-robotics', name: 'Automation & Robotics Technician (Factory)', abbr: 'Automation' },
            { id: 'mfg-engineer', name: 'Manufacturing Engineer (Production-Facing)', abbr: 'Mfg Eng' }
        ];

        const DETAIL_ROLE_OPTIONS = [
            { id: 'cnc-machinist', name: 'CNC Machinist (5-Axis)' },
            { id: 'quality-metrology', name: 'CMM Programmer' }
        ];

        const ROLE_CUTLINES = {
            'cnc-machinist': {
                requirements: [
                    { construct: 'PRAD', threshold: 60 },
                    { construct: 'SPV', threshold: 65 },
                    { construct: 'RRCP', threshold: 65 },
                    { construct: 'ASWL', threshold: 60 },
                    { composite: 'manufacturingTechnical', threshold: 60 }
                ]
            },
            'cnc-programmer': {
                requirements: [
                    { construct: 'DLCT', threshold: 65 },
                    { construct: 'TMAQ', threshold: 65 },
                    { construct: 'SRD', threshold: 60 },
                    { construct: 'SPV', threshold: 60 },
                    { composite: 'technicalAptitude', threshold: 60 }
                ]
            },
            'mfg-systems': {
                requirements: [
                    { construct: 'SRD', threshold: 60 },
                    { construct: 'FIDS', threshold: 60 },
                    { construct: 'ASWL', threshold: 60 },
                    { construct: 'RRCP', threshold: 65 },
                    { composite: 'manufacturingTechnical', threshold: 60 }
                ]
            },
            'quality-metrology': {
                requirements: [
                    { construct: 'PRAD', threshold: 70 },
                    { construct: 'TMAQ', threshold: 65 },
                    { construct: 'MAC', threshold: 60 },
                    { construct: 'RRCP', threshold: 65 },
                    { composite: 'behavioralIntegrity', threshold: 70 }
                ]
            },
            'production-assembly': {
                requirements: [
                    { construct: 'RRCP', threshold: 65 },
                    { construct: 'ASWL', threshold: 60 },
                    { construct: 'ICI', threshold: 60 },
                    { composite: 'behavioralIntegrity', threshold: 65 }
                ]
            },
            'automation-robotics': {
                requirements: [
                    { construct: 'SRD', threshold: 65 },
                    { construct: 'DLCT', threshold: 65 },
                    { construct: 'FIDS', threshold: 60 },
                    { construct: 'SPV', threshold: 60 },
                    { composite: 'technicalAptitude', threshold: 60 }
                ]
            },
            'mfg-engineer': {
                requirements: [
                    { construct: 'FI', threshold: 70 },
                    { construct: 'ER', threshold: 65 },
                    { construct: 'SRD', threshold: 65 },
                    { construct: 'CMR', threshold: 60 },
                    { composite: 'cognitiveCore', threshold: 70 }
                ]
            }
        };

        const COMPOSITE_LABELS = {
            aci: 'ACI Overall',
            cognitiveCore: 'Cognitive Core',
            technicalAptitude: 'Technical Aptitude',
            behavioralIntegrity: 'Behavioral Integrity',
            manufacturingTechnical: 'Manufacturing Technical',
            generalTechnical: 'General Technical',
            learningVelocity: 'Learning Velocity',
            reliability: 'Reliability Index'
        };

        function generateCandidateData() {
            const candidates = [
                {
                    id: 'ACI-2024-0847',
                    name: 'Marcus Chen',
                    status: 'complete',
                    background: 'Former line cook, self-taught electronics hobbyist, community college coursework',
                    onboarding: 'Accelerated',
                    archetype: 'diamond',
                    baseScores: { cognitive: 82, technical: 78, integrity: 85 }
                },
                {
                    id: 'ACI-2024-0851',
                    name: 'Sarah Okonkwo',
                    status: 'complete',
                    background: 'Military avionics technician, 6 years active duty',
                    onboarding: 'Standard',
                    archetype: 'steady',
                    baseScores: { cognitive: 68, technical: 75, integrity: 92 }
                },
                {
                    id: 'ACI-2024-0856',
                    name: 'James Reilly',
                    status: 'complete',
                    background: 'BS Mechanical Engineering, 2 years automotive QC',
                    onboarding: 'Standard',
                    archetype: 'balanced',
                    baseScores: { cognitive: 71, technical: 73, integrity: 76 }
                },
                {
                    id: 'ACI-2024-0862',
                    name: 'Priya Sharma',
                    status: 'complete',
                    background: 'Community college mechatronics, internship at Tesla',
                    onboarding: 'Accelerated',
                    archetype: 'technical',
                    baseScores: { cognitive: 74, technical: 81, integrity: 79 }
                },
                {
                    id: 'ACI-2024-0869',
                    name: 'David Kim',
                    status: 'complete',
                    background: 'IT support background, cybersecurity bootcamp graduate',
                    onboarding: 'Standard',
                    archetype: 'cyber',
                    baseScores: { cognitive: 77, technical: 69, integrity: 82 }
                },
                {
                    id: 'ACI-2024-0873',
                    name: 'Tyler Morrison',
                    status: 'complete',
                    background: 'High school diploma, 3 years warehouse automation operator',
                    onboarding: 'Structured Support',
                    archetype: 'risky',
                    baseScores: { cognitive: 79, technical: 76, integrity: 52 }
                },
                {
                    id: 'ACI-2024-0881',
                    name: 'Elena Rodriguez',
                    status: 'complete',
                    background: 'AS Electronics Technology, semiconductor cleanroom experience',
                    onboarding: 'Standard',
                    archetype: 'fab-specialist',
                    baseScores: { cognitive: 65, technical: 79, integrity: 88 }
                },
                {
                    id: 'ACI-2024-0889',
                    name: 'Michael Oduya',
                    status: 'in-progress',
                    background: 'Physics undergraduate, research lab assistant',
                    onboarding: 'Accelerated',
                    archetype: 'analytical',
                    baseScores: { cognitive: 86, technical: 72, integrity: 80 }
                },
                {
                    id: 'ACI-2024-0894',
                    name: 'Jennifer Walsh',
                    status: 'complete',
                    background: 'Navy nuclear technician, honorable discharge',
                    onboarding: 'Accelerated',
                    archetype: 'elite',
                    baseScores: { cognitive: 88, technical: 85, integrity: 91 }
                },
                {
                    id: 'ACI-2024-0901',
                    name: 'Robert Tanaka',
                    status: 'complete',
                    background: 'Trade school HVAC, facility maintenance supervisor',
                    onboarding: 'Standard',
                    archetype: 'steady',
                    baseScores: { cognitive: 62, technical: 70, integrity: 86 }
                }
            ];

            return candidates.map(c => generateFullScores(c));
        }

        function generateFullScores(candidate) {
            const { baseScores, archetype } = candidate;
            const scores = {};
            const noise = () => Math.floor(Math.random() * 16) - 8;

            CONSTRUCTS.cognitive.forEach(construct => {
                let base = baseScores.cognitive + noise();
                if (archetype === 'diamond' && ['FI', 'ER', 'TCDQ'].includes(construct.id)) base += 8;
                if (archetype === 'steady' && ['ICI', 'MAC'].includes(construct.id)) base += 5;
                if (archetype === 'risky' && construct.id === 'ICI') base -= 15;
                if (archetype === 'analytical' && ['FI', 'ER', 'CMR'].includes(construct.id)) base += 10;
                if (archetype === 'elite') base += 5;
                scores[construct.id] = clampScore(base);
            });

            CONSTRUCTS.technical.forEach(construct => {
                let base = baseScores.technical + noise();
                if (archetype === 'diamond' && ['SRD', 'DLCT', 'FIDS'].includes(construct.id)) base += 6;
                if (archetype === 'steady' && ['RRCP', 'ASWL'].includes(construct.id)) base += 10;
                if (archetype === 'technical' && ['SRD', 'PRAD', 'FIDS'].includes(construct.id)) base += 8;
                if (archetype === 'cyber' && ['ISI', 'DLCT'].includes(construct.id)) base += 12;
                if (archetype === 'fab-specialist' && ['PRAD', 'ASWL', 'SPV'].includes(construct.id)) base += 10;
                if (archetype === 'elite') base += 5;
                scores[construct.id] = clampScore(base);
            });

            CONSTRUCTS.integrity.forEach(construct => {
                let base = baseScores.integrity + noise();
                if (archetype === 'risky') base -= 20;
                if (archetype === 'steady') base += 5;
                if (archetype === 'elite') base += 3;
                scores[construct.id] = clampScore(base);
            });

            const cognitiveAvg = average(CONSTRUCTS.cognitive.map(c => scores[c.id]));
            const technicalAvg = average(CONSTRUCTS.technical.map(c => scores[c.id]));
            const integrityAvg = average(CONSTRUCTS.integrity.map(c => scores[c.id]));

            const composites = {
                aci: Math.round(cognitiveAvg * 0.35 + technicalAvg * 0.45 + integrityAvg * 0.20),
                cognitiveCore: Math.round(cognitiveAvg),
                technicalAptitude: Math.round(technicalAvg),
                behavioralIntegrity: Math.round(integrityAvg),
                generalTechnical: Math.round(average([scores.FI, scores.SRD, scores.PRAD, scores.TMAQ, scores.DLCT])),
                manufacturingTechnical: Math.round(average([scores.SRD, scores.SPV, scores.ASWL, scores.FIDS, scores.RRCP])),
                semiconductor: Math.round(average([scores.PRAD, scores.ASWL, scores.SPV, scores.RRCP, scores.MAC])),
                cyber: Math.round(average([scores.ISI, scores.DLCT, scores.ICI, scores.PRAD, scores.SRD])),
                integrity: Math.round(integrityAvg),
                learningVelocity: Math.round(average([scores.FI, scores.ER, scores.MAC, scores.ERCS])),
                reliability: Math.round(average([scores.RRCP, scores.ASWL, scores.MAC, scores.VCS, scores.BCC]))
            };

            const roleScores = ROLES.map(role => {
                const cutline = ROLE_CUTLINES[role.id];
                let fitScore = 0;
                let passes = 0;
                cutline.requirements.forEach(req => {
                    const score = req.construct ? scores[req.construct] : composites[req.composite];
                    const percentile = scoreToPercentile(score);
                    if (percentile >= req.threshold) passes++;
                    fitScore += percentile - req.threshold;
                });
                return { role, fitScore, passes, total: cutline.requirements.length };
            });

            roleScores.sort((a, b) => b.fitScore - a.fitScore);
            const recommendedRoles = roleScores.slice(0, 2).filter(r => r.passes >= r.total - 1).map(r => r.role.id);

            return {
                ...candidate,
                scores,
                composites,
                recommendedRoles: recommendedRoles.length > 0 ? recommendedRoles : [roleScores[0].role.id],
                roleScores
            };
        }

        function clampScore(score) {
            return Math.max(20, Math.min(99, Math.round(score)));
        }

        function average(arr) {
            return arr.reduce((a, b) => a + b, 0) / arr.length;
        }

        function scoreToPercentile(score) {
            return Math.max(1, Math.min(99, score));
        }

        function getBand(percentile) {
            if (percentile >= 85) return { label: 'Elite Readiness', class: 'elite' };
            if (percentile >= 60) return { label: 'Strong', class: 'strong' };
            if (percentile >= 40) return { label: 'Developing', class: 'developing' };
            return { label: 'Concern', class: 'concern' };
        }

        function getConfidenceInterval(score) {
            const margin = Math.floor(Math.random() * 4) + 3;
            return `Â±${margin}`;
        }

        function ordinal(n) {
            const s = ['th', 'st', 'nd', 'rd'];
            const v = n % 100;
            return n + (s[(v - 20) % 10] || s[v] || s[0]);
        }

        const EVIDENCE_DATA = {
            'FI': {
                scenario: 'Candidate was presented with an unfamiliar robotic arm exhibiting erratic movement patterns. No manual was provided. Task: diagnose and propose a solution within 8 minutes.',
                transcript: [
                    { speaker: 'system', content: 'The robotic arm is moving erratically during pick-and-place operations. You have no documentation. What do you do first?', time: '00:00' },
                    { speaker: 'candidate', content: 'I\'d start by observing the patternâ€”is it random or does it repeat? I want to see if it correlates with specific positions or load conditions.', time: '00:42' },
                    { speaker: 'system', content: 'It seems to happen more frequently when reaching the far corner of the workspace. What\'s your hypothesis?', time: '01:15' },
                    { speaker: 'candidate', content: 'Could be a calibration drift at extension limits, or a worn joint. I\'d check if reducing the reach envelope stabilizes it before opening up the arm.', time: '02:03' }
                ],
                rationale: 'Candidate demonstrated structured hypothesis generation without relying on documentation. Showed ability to isolate variables systematically and proposed non-destructive diagnostic steps.',
                indicators: { timePressure: 'high', interruptions: 'medium', ambiguity: 'high' }
            },
            'PRAD': {
                scenario: 'Live process monitoring dashboard showing 12 parameters over 4 hours. One subtle deviation introduced at t+2.5h. Candidate must identify the anomaly.',
                transcript: [
                    { speaker: 'system', content: 'You\'re monitoring a wafer processing tool. Review the trends and report any concerns.', time: '00:00' },
                    { speaker: 'candidate', content: 'Chamber pressure looks stable, temperature within spec... wait, the RF power variance increased slightly around 2:30. It\'s within limits but the pattern changed.', time: '03:24' },
                    { speaker: 'system', content: 'Is that significant enough to act on?', time: '03:45' },
                    { speaker: 'candidate', content: 'The magnitude is small but the character changedâ€”used to be random noise, now it\'s periodic. I\'d flag it for the next PM window even if we don\'t stop now.', time: '04:12' }
                ],
                rationale: 'Candidate detected subtle pattern shift despite nominal values. Distinguished between random variation and systematic change. Calibrated response appropriately.',
                indicators: { timePressure: 'low', interruptions: 'low', ambiguity: 'medium' }
            },
            'ICI': {
                scenario: 'Multi-tasking scenario with primary calibration task and frequent interruptions (simulated radio calls, alarms, colleague questions).',
                transcript: [
                    { speaker: 'system', content: 'Continue calibrating the measurement probe. [INTERRUPT: Alarm sounds] There\'s a low-priority alert on Line 3.', time: '00:00' },
                    { speaker: 'candidate', content: 'Acknowledged. I\'ll note it but I\'m mid-calibration. If it escalates, pull me out, but let me finish this step or we\'ll have to restart.', time: '00:18' },
                    { speaker: 'system', content: '[INTERRUPT: Colleague asks about break schedule] Also, when are we taking lunch?', time: '01:45' },
                    { speaker: 'candidate', content: 'After I finish this. Please hold non-urgent questions.', time: '01:52' }
                ],
                rationale: 'Maintained task focus despite multiple interruption types. Appropriately triaged interruptions by urgency. Did not sacrifice primary task quality for social responsiveness.',
                indicators: { timePressure: 'medium', interruptions: 'high', ambiguity: 'low' }
            },
            'ISI': {
                scenario: 'Social engineering attempt via simulated phone call requesting system access credentials for "urgent maintenance."',
                transcript: [
                    { speaker: 'system', content: '[Phone rings] Hi, this is Mike from IT. We need your login to push an urgent security patch to your workstation. Can you give me your password?', time: '00:00' },
                    { speaker: 'candidate', content: 'I can\'t give out my password over the phone. Is there a ticket number for this? I can verify with our IT lead.', time: '00:22' },
                    { speaker: 'system', content: 'There\'s no time for that. The patch has to go in now or we\'ll have to take the whole network down.', time: '00:35' },
                    { speaker: 'candidate', content: 'Then you\'ll need to take it down. I\'m not authorized to share credentials regardless of urgency. I can call the IT desk to verify you.', time: '00:48' }
                ],
                rationale: 'Candidate resisted social pressure and urgency framing. Offered verification path rather than outright refusal, showing security awareness without being obstructive.',
                indicators: { timePressure: 'high', interruptions: 'low', ambiguity: 'medium' }
            },
            'VCS': {
                scenario: 'Ethical dilemma: supervisor suggests skipping a time-consuming QC step to meet shift quota. No immediate safety risk but procedure violation.',
                transcript: [
                    { speaker: 'system', content: 'Your supervisor says: "We\'re behind quota. Skip the secondary inspection on these unitsâ€”they look fine. I\'ll sign off."', time: '00:00' },
                    { speaker: 'candidate', content: 'I understand the pressure, but if we skip inspection and something slips through, it\'s worse for everyone. Can we flag these for next shift to catch up properly?', time: '00:34' },
                    { speaker: 'system', content: 'That makes me look bad to my boss. Just this onceâ€”nobody will know.', time: '00:52' },
                    { speaker: 'candidate', content: 'I\'m not comfortable with that. If the process is too slow we should raise it as a capacity issue, not work around it.', time: '01:15' }
                ],
                rationale: 'Candidate maintained procedural integrity under social pressure from authority figure. Offered constructive alternatives rather than simple refusal.',
                indicators: { timePressure: 'medium', interruptions: 'low', ambiguity: 'medium' }
            }
        };

        function getDefaultEvidence(construct) {
            return {
                scenario: `Adaptive scenario testing for ${construct.name}. Candidate was presented with domain-specific challenges calibrated to their demonstrated ability level.`,
                transcript: [
                    { speaker: 'system', content: 'Initial prompt presented based on role-relevant context.', time: '00:00' },
                    { speaker: 'candidate', content: 'Response captured and analyzed for construct-relevant indicators.', time: '00:30' },
                    { speaker: 'system', content: 'Follow-up probe adjusted based on initial response quality.', time: '01:00' }
                ],
                rationale: `Scoring based on standardized rubric for ${construct.id}. AI adapted difficulty and pacing while maintaining fixed scoring constructs.`,
                indicators: { timePressure: 'medium', interruptions: 'low', ambiguity: 'medium' }
            };
        }

        // ============================================================
        // STATE MANAGEMENT
        // ============================================================

        const state = {
            currentView: 'overview',
            selectedCandidate: null,
            selectedRole: 'cnc-machinist',
            sortBy: 'aci',
            sortDirection: 'desc',
            roleFilter: 'all',
            cutlineFilter: false,
            candidates: generateCandidateData(),
            expandedSections: { cognitive: false, technical: false, integrity: false },
            expandedConstructs: {}
        };

        function setState(updates) {
            Object.assign(state, updates);
            render();
        }

        // ============================================================
        // RENDERING
        // ============================================================

        function render() {
            renderNavigation();
            renderCurrentView();
        }

        function renderNavigation() {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                const view = tab.dataset.view;
                const isActive = view === state.currentView ||
                    (state.currentView === 'candidate-detail' && view === 'candidates');
                tab.classList.toggle('active', isActive);
                tab.setAttribute('aria-selected', isActive);
                tab.setAttribute('tabindex', isActive ? '0' : '-1');
            });
        }

        function renderCurrentView() {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });

            const viewId = state.currentView === 'candidate-detail' ? 'candidate-detail' : state.currentView;
            const viewEl = document.getElementById(`view-${viewId}`);
            if (viewEl) {
                viewEl.classList.add('active');
            }

            switch (state.currentView) {
                case 'overview':
                    renderOverview();
                    break;
                case 'candidates':
                    renderCandidates();
                    break;
                case 'candidate-detail':
                    renderCandidateDetail();
                    break;
                case 'cutlines':
                    renderCutlines();
                    break;
                case 'heatmap':
                    renderHeatmap();
                    break;
            }
        }

        // ============================================================
        // OVERVIEW VIEW
        // ============================================================

        function renderOverview() {
            const container = document.getElementById('overview-dashboard');
            const candidates = getFilteredCandidates().slice(0, 6);

            let html = `<div class="overview-grid">`;

            candidates.forEach(c => {
                const band = getBand(c.composites.aci);
                const roles = c.recommendedRoles.map(rid => ROLES.find(r => r.id === rid)?.abbr || rid);
                html += `
                    <div class="overview-card" data-candidate="${c.id}">
                        <div class="overview-card-header">
                            <div class="overview-card-info">
                                <div class="overview-card-name">${c.name}</div>
                                <div class="overview-card-id">${c.id}</div>
                            </div>
                            <div class="overview-card-score">
                                <div class="overview-card-value">${c.composites.aci}</div>
                                <div class="overview-card-band">${band.label}</div>
                            </div>
                        </div>
                        <div class="overview-card-roles">
                            ${roles.map(r => `<span class="role-chip primary">${r}</span>`).join('')}
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;

            container.querySelectorAll('[data-candidate]').forEach(el => {
                el.addEventListener('click', () => {
                    const candidateId = el.dataset.candidate;
                    setState({ currentView: 'candidate-detail', selectedCandidate: candidateId });
                });
            });
        }

        // ============================================================
        // CANDIDATES VIEW
        // ============================================================

        function getFilteredCandidates() {
            let candidates = [...state.candidates];

            if (state.roleFilter !== 'all') {
                candidates = candidates.filter(c => c.recommendedRoles.includes(state.roleFilter));
            }

            if (state.cutlineFilter && state.roleFilter !== 'all') {
                candidates = candidates.filter(c => meetsCutline(c, state.roleFilter));
            }

            const sortKey = {
                'aci': 'aci',
                'cognitive': 'cognitiveCore',
                'technical': 'technicalAptitude',
                'manufacturing': 'manufacturingTechnical',
                'learning': 'learningVelocity',
                'reliability': 'reliability',
                'integrity': 'behavioralIntegrity'
            }[state.sortBy] || 'aci';

            candidates.sort((a, b) => {
                const aVal = a.composites[sortKey];
                const bVal = b.composites[sortKey];
                return state.sortDirection === 'desc' ? bVal - aVal : aVal - bVal;
            });

            return candidates;
        }

        function meetsCutline(candidate, roleId) {
            const cutline = ROLE_CUTLINES[roleId];
            if (!cutline) return true;

            return cutline.requirements.every(req => {
                const score = req.construct ? candidate.scores[req.construct] : candidate.composites[req.composite];
                const percentile = scoreToPercentile(score);
                return percentile >= req.threshold;
            });
        }

        function renderCandidates() {
            const container = document.getElementById('candidates-table-container');
            const candidates = getFilteredCandidates();

            let html = `
                <table class="candidate-table" role="grid">
                    <thead>
                        <tr>
                            <th>Candidate</th>
                            <th>Status</th>
                            <th>Recommended Roles</th>
                            <th data-sort="aci" class="${state.sortBy === 'aci' ? 'sorted' : ''}">
                                ACI <span class="sort-indicator">${state.sortBy === 'aci' ? (state.sortDirection === 'desc' ? 'â†“' : 'â†‘') : 'â†“'}</span>
                            </th>
                            <th data-sort="reliability" class="${state.sortBy === 'reliability' ? 'sorted' : ''}">
                                Reliability <span class="sort-indicator">${state.sortBy === 'reliability' ? (state.sortDirection === 'desc' ? 'â†“' : 'â†‘') : 'â†“'}</span>
                            </th>
                            <th data-sort="learning" class="${state.sortBy === 'learning' ? 'sorted' : ''}">
                                Learning <span class="sort-indicator">${state.sortBy === 'learning' ? (state.sortDirection === 'desc' ? 'â†“' : 'â†‘') : 'â†“'}</span>
                            </th>
                            <th data-sort="integrity" class="${state.sortBy === 'integrity' ? 'sorted' : ''}">
                                Behavioral Integrity <span class="sort-indicator">${state.sortBy === 'integrity' ? (state.sortDirection === 'desc' ? 'â†“' : 'â†‘') : 'â†“'}</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            candidates.forEach(c => {
                const aciBand = getBand(c.composites.aci);
                const reliabilityBand = getBand(c.composites.reliability);
                const learningBand = getBand(c.composites.learningVelocity);
                const integrityBand = getBand(c.composites.behavioralIntegrity);
                const roles = c.recommendedRoles.map(rid => ROLES.find(r => r.id === rid));

                html += `
                    <tr data-candidate="${c.id}" data-aci="${c.composites.aci}" tabindex="0" role="row">
                        <td>
                            <div class="candidate-name">${c.name}</div>
                            <div class="candidate-id">${c.id}</div>
                        </td>
                        <td>
                            <span class="candidate-status ${c.status === 'complete' ? 'complete' : 'in-progress'}">
                                <span class="status-dot"></span>
                                ${c.status === 'complete' ? 'Complete' : 'In Progress'}
                            </span>
                        </td>
                        <td>
                            <div class="role-chips">
                                ${roles.map((r, i) => `<span class="role-chip ${i === 0 ? 'primary' : ''}">${r?.name || r?.abbr}</span>`).join('')}
                            </div>
                        </td>
                        <td><span class="score-cell ${aciBand.class}">${c.composites.aci}</span></td>
                        <td><span class="score-cell ${reliabilityBand.class}">${c.composites.reliability}</span></td>
                        <td><span class="score-cell ${learningBand.class}">${c.composites.learningVelocity}</span></td>
                        <td><span class="score-cell ${integrityBand.class}">${c.composites.behavioralIntegrity}</span></td>
                    </tr>
                `;
            });

            html += '</tbody></table>';
            container.innerHTML = html;

            container.querySelectorAll('th[data-sort]').forEach(th => {
                th.addEventListener('click', () => {
                    const sortKey = th.dataset.sort;
                    if (state.sortBy === sortKey) {
                        setState({ sortDirection: state.sortDirection === 'desc' ? 'asc' : 'desc' });
                    } else {
                        setState({ sortBy: sortKey, sortDirection: 'desc' });
                    }
                });
            });

            container.querySelectorAll('tr[data-candidate]').forEach(tr => {
                tr.addEventListener('click', () => {
                    setState({ currentView: 'candidate-detail', selectedCandidate: tr.dataset.candidate });
                });
                tr.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        setState({ currentView: 'candidate-detail', selectedCandidate: tr.dataset.candidate });
                    }
                });
            });
        }

        // ============================================================
        // CANDIDATE DETAIL VIEW
        // ============================================================

        function renderCandidateDetail() {
            const container = document.getElementById('candidate-detail-content');
            const candidate = state.candidates.find(c => c.id === state.selectedCandidate);

            if (!candidate) {
                container.innerHTML = '<p>Candidate not found.</p>';
                return;
            }

            const aciBand = getBand(candidate.composites.aci);
            const roleRankings = getRoleRankings(candidate);
            const primaryRole = roleRankings[0]?.role?.name || 'Manufacturing Systems Technician';
            const primaryRoleId = roleRankings[0]?.role?.id || 'mfg-systems';
            const summary = buildExecutiveSummary(candidate, primaryRole, primaryRoleId);
            const detailRoleId = getDetailRoleId(primaryRoleId);
            const roleInsights = getRoleInsights(candidate, detailRoleId);
            const validationItems = getValidationItems(candidate, detailRoleId, roleInsights);
            const onboardingPlan = getOnboardingPlan(candidate, detailRoleId, roleInsights);
            const benchmark = getBenchmarkComparison(candidate, detailRoleId);

            let html = `
                <div class="detail-header">
                    <div class="detail-candidate-info">
                        <h2 class="detail-candidate-name">${candidate.name}</h2>
                        <div class="detail-candidate-meta">
                            <span style="font-family: var(--font-mono);">${candidate.id}</span>
                            <span class="divider"></span>
                            <span class="candidate-status ${candidate.status === 'complete' ? 'complete' : 'in-progress'}">
                                <span class="status-dot"></span>
                                ${candidate.status === 'complete' ? 'Complete' : 'In Progress'}
                            </span>
                            <span class="divider"></span>
                            <span class="onboarding-indicator">
                                <span class="onboarding-dot ${candidate.onboarding.toLowerCase().replace(' ', '-')}"></span>
                                ${candidate.onboarding}
                            </span>
                        </div>
                        <div class="detail-candidate-background">${candidate.background}</div>
                    </div>
                    <div class="detail-aci-score">
                        <div class="detail-aci-label">Arklight Cognitive Index</div>
                        <div class="detail-aci-value">${candidate.composites.aci}</div>
                        <div class="detail-aci-percentile">${ordinal(candidate.composites.aci)} Percentile</div>
                        <div class="detail-aci-band">${aciBand.label}</div>
                        <div class="detail-aci-microcopy">
                            <div>Predicts: learning velocity, reliability, error recovery under production constraints</div>
                            <div>Does not replace: interviews, hands-on trials, or manager judgment</div>
                        </div>
                    </div>
                </div>

                <div class="detail-summary-grid">
                    ${renderExecutiveSummary(summary)}
                    ${renderRoleFitMapping(candidate, roleRankings, detailRoleId, roleInsights)}
                </div>

                <div class="charts-grid">
                    <div class="chart-container full-width">
                        <h3 class="chart-title">Cognitive Profile</h3>
                        <div class="radar-chart" id="radar-chart"></div>
                        ${renderRadarCallouts(roleInsights)}
                        ${renderRadarLegend()}
                        <p class="chart-note">Benchmarks are derived from partnerships with leading advanced manufacturing and defense-adjacent organizations, informed by structured interviews and performance analysis of top operators across public and private sectors.</p>
                    </div>
                </div>

                ${renderValidationProtocol(validationItems, detailRoleId)}
                ${renderOnboardingPlan(onboardingPlan, detailRoleId)}
                ${renderBenchmarkComparison(benchmark, detailRoleId)}

                <section class="section-header">
                    <h2 class="section-title">Construct-Level Detail</h2>
                </section>

                ${renderConstructSection('cognitive', 'Cognitive Core', CONSTRUCTS.cognitive, candidate)}
                ${renderConstructSection('technical', 'Technical Aptitude', CONSTRUCTS.technical, candidate)}
                ${renderConstructSection('integrity', 'Behavioral Integrity', CONSTRUCTS.integrity, candidate)}

                <div class="domain-grid">
                    ${renderDomainSection({
                        title: 'Cognitive Core â€” Foundational Meta-Capabilities',
                        purpose: 'Governs learning speed, decision quality, error avoidance, and long-term performance ceiling.',
                        constructs: CONSTRUCTS.cognitive,
                        valueLabel: 'Operational value',
                        summary: 'This layer determines how fast the candidate learns, how early they detect risk, and how effectively they recover from error.'
                    })}
                    ${renderDomainSection({
                        title: 'Technical Aptitude â€” Operational Cognition',
                        purpose: 'Measures real-world technical reasoning under operational constraints.',
                        constructs: CONSTRUCTS.technical,
                        valueLabel: 'Operational value'
                    })}
                    ${renderDomainSection({
                        title: 'Behavioral Integrity & Mission Alignment',
                        purpose: 'Measures behavior under constraint, not personality.',
                        constructs: CONSTRUCTS.integrity,
                        valueLabel: 'Why it matters operationally'
                    })}
                </div>
            `;

            container.innerHTML = html;
            renderRadarChart(candidate);
            setupConstructListeners();

            const roleSelect = container.querySelector('#intended-role-select');
            if (roleSelect) {
                roleSelect.addEventListener('change', (e) => {
                    setState({ selectedRole: e.target.value });
                });
            }
        }

        function getRoleRankings(candidate) {
            if (candidate.roleScores && candidate.roleScores.length) {
                return candidate.roleScores;
            }
            return ROLES.map(role => {
                const cutline = ROLE_CUTLINES[role.id];
                let fitScore = 0;
                let passes = 0;
                const total = cutline?.requirements?.length || 0;
                cutline?.requirements?.forEach(req => {
                    const score = req.construct ? candidate.scores[req.construct] : candidate.composites[req.composite];
                    const percentile = scoreToPercentile(score);
                    if (percentile >= req.threshold) passes++;
                    fitScore += percentile - req.threshold;
                });
                return { role, fitScore, passes, total };
            }).sort((a, b) => b.fitScore - a.fitScore);
        }

        function getDetailRoleId(primaryRoleId) {
            const optionIds = DETAIL_ROLE_OPTIONS.map(option => option.id);
            if (optionIds.includes(state.selectedRole)) return state.selectedRole;
            if (optionIds.includes(primaryRoleId)) return primaryRoleId;
            return DETAIL_ROLE_OPTIONS[0].id;
        }

        function getConstructById(constructId) {
            return [...CONSTRUCTS.cognitive, ...CONSTRUCTS.technical, ...CONSTRUCTS.integrity].find(c => c.id === constructId);
        }

        function getRoleDisplayName(roleId) {
            return DETAIL_ROLE_OPTIONS.find(option => option.id === roleId)?.name ||
                ROLES.find(role => role.id === roleId)?.name ||
                'Selected role';
        }

        function getRoleFitSummary(candidate, roleId) {
            const cutline = ROLE_CUTLINES[roleId];
            if (!cutline) {
                return { rating: 'Medium', passes: 0, total: 0, strengths: [], risks: [] };
            }

            const scored = cutline.requirements.map(req => {
                const score = req.construct ? candidate.scores[req.construct] : candidate.composites[req.composite];
                const percentile = scoreToPercentile(score);
                return {
                    req,
                    score,
                    percentile,
                    construct: req.construct ? getConstructById(req.construct) : null
                };
            });

            const passes = scored.filter(item => item.percentile >= item.req.threshold).length;
            const total = scored.length;
            const passRatio = total ? passes / total : 0;
            let rating = 'Medium';
            if (passRatio >= 0.8) rating = 'High';
            if (passRatio < 0.5) rating = 'Low';

            const strengths = scored.filter(item => item.construct).sort((a, b) => b.percentile - a.percentile);
            const risks = scored.filter(item => item.construct).sort((a, b) => a.percentile - b.percentile);

            return { rating, passes, total, strengths, risks };
        }

        function getRoleInsights(candidate, roleId) {
            const summary = getRoleFitSummary(candidate, roleId);
            const strengths = summary.strengths.slice(0, 2);
            const riskZones = summary.risks.filter(r => r.percentile < 60).slice(0, 2);
            const fallbackRisks = summary.risks.slice(0, 2);

            const why = strengths.map(s => `${s.construct.name} (${ordinal(s.percentile)}) supports ${s.construct.predicts.toLowerCase()}.`);
            while (why.length < 2 && summary.strengths[why.length]) {
                const item = summary.strengths[why.length];
                if (item?.construct) {
                    why.push(`${item.construct.name} (${ordinal(item.percentile)}) reinforces ${item.construct.predicts.toLowerCase()}.`);
                } else {
                    break;
                }
            }

            const conditions = [];
            const needsStructure = candidate.composites.reliability < 70;
            const needsRamp = candidate.composites.learningVelocity < 65;
            if (needsStructure) conditions.push('Set clear SOP check-ins and peer verification for early runs.');
            if (needsRamp) conditions.push('Use a staged ramp with rising task complexity and deliberate practice.');
            if (conditions.length < 2 && summary.risks[0]?.construct) {
                conditions.push(`Target coaching on ${summary.risks[0].construct.name.toLowerCase()} to stabilize early output.`);
            }
            if (conditions.length < 2) {
                conditions.push('Pair with a senior operator for initial setups and first-article validation.');
            }

            const watchoutsSource = riskZones.length ? riskZones : fallbackRisks;
            const watchouts = watchoutsSource.length ?
                watchoutsSource.map(r => `${r.construct.name} (${ordinal(r.percentile)}) may require closer monitoring.`) :
                ['No critical watch-outs flagged; monitor early shift reliability.'];

            return {
                rating: summary.rating,
                strengths,
                riskZones: watchoutsSource,
                why,
                conditions: conditions.slice(0, 2),
                watchouts: watchouts.slice(0, 2),
                summary
            };
        }

        function buildExecutiveSummary(candidate, primaryRole, primaryRoleId) {
            const primaryFit = getRoleFitSummary(candidate, primaryRoleId);
            const recommendation = getRecommendation(candidate, primaryFit);
            return {
                recommendation,
                primaryRoleFit: `${primaryRole} â€” ${primaryFit.rating}`,
                rampProjection: getRampProjection(candidate),
                primaryRisks: getRiskFlags(candidate),
                idealManager: getIdealManager(candidate),
                nextSteps: getNextSteps(candidate, primaryRoleId, recommendation, primaryFit)
            };
        }

        function getRecommendation(candidate, roleFit) {
            const strongIntegrity = candidate.composites.behavioralIntegrity >= 65;
            const strongReliability = candidate.composites.reliability >= 65;
            if (roleFit.rating === 'High' && strongIntegrity && strongReliability) return 'Proceed';
            if (roleFit.rating === 'Low' || candidate.composites.behavioralIntegrity < 55) return 'Hold';
            return 'Conditional';
        }

        function getRampProjection(candidate) {
            const learning = candidate.composites.learningVelocity;
            const reliability = candidate.composites.reliability;
            let pace = 'standard (8-12 weeks)';
            if (learning >= 75 && reliability >= 70) pace = 'accelerated (6-8 weeks)';
            if (learning < 60 || reliability < 60) pace = 'extended (12-16 weeks)';
            return `Projected time to consistent productivity relative to top industry performers: ${pace}.`;
        }

        function getIdealManager(candidate) {
            const guidance = [];
            guidance.push(candidate.composites.learningVelocity >= 70 ?
                'Fast feedback cadence with stretch tasks after early wins.' :
                'Structured ramp with clear sequencing before increasing complexity.');
            guidance.push(candidate.composites.reliability >= 70 ?
                'Autonomy once SOP compliance is stable and repeatable.' :
                'Frequent check-ins with explicit quality gates and sign-offs.');
            return guidance;
        }

        function getAssessmentInconsistency(candidate) {
            if (candidate.composites.learningVelocity >= 70 && candidate.composites.reliability < 60) {
                return 'high learning velocity paired with lower reliability';
            }
            if (candidate.composites.technicalAptitude >= 75 && candidate.composites.behavioralIntegrity < 60) {
                return 'strong technical aptitude paired with integrity risk';
            }
            if (candidate.composites.cognitiveCore >= 75 && candidate.composites.manufacturingTechnical < 60) {
                return 'cognitive strength paired with weaker manufacturing execution';
            }
            return '';
        }

        function getNextSteps(candidate, primaryRoleId, recommendation, primaryFit) {
            const steps = [];
            const roleName = ROLES.find(r => r.id === primaryRoleId)?.name || 'the role';
            const leadStrength = primaryFit.strengths?.[0]?.construct?.name;
            const action = recommendation === 'Proceed' ? 'Proceed with' :
                (recommendation === 'Hold' ? 'Hold until' : 'Proceed conditionally with');
            const focus = leadStrength ? ` focused on ${leadStrength.toLowerCase()}` : '';
            steps.push(`${action} a role-aligned work sample for ${roleName}${focus}.`);

            const inconsistency = getAssessmentInconsistency(candidate);
            if (inconsistency) {
                steps.push(`Probe ${inconsistency} against the job description and shift demands.`);
            } else {
                steps.push('Validate role-critical exposure and supervision expectations against the job description.');
            }
            return steps;
        }

        function getOverallPotential(candidate) {
            const band = getBand(candidate.composites.aci).label;
            if (band === 'Elite Readiness') return 'Top-tier operator with high upside for precision manufacturing and metrology roles.';
            if (band === 'Strong') return 'Strong operational performer with consistent learning velocity and low error risk.';
            if (band === 'Developing') return 'Developing talent with targeted coaching potential for production-facing roles.';
            return 'High-risk placement without close supervision and structured development.';
        }

        function getDeploymentConfidence(candidate) {
            const strongReliability = candidate.composites.reliability >= 70;
            const strongIntegrity = candidate.composites.behavioralIntegrity >= 70;
            const strongAci = candidate.composites.aci >= 70;
            return (strongReliability && strongIntegrity && strongAci) ?
                'High confidence for direct placement' :
                'High potential with mentorship';
        }

        function getRiskFlags(candidate) {
            const risks = [];
            if (candidate.composites.behavioralIntegrity < 60) {
                risks.push('Behavioral integrity below target for high-trust roles.');
            }
            if (candidate.composites.reliability < 60) {
                risks.push('Reliability index below target for sustained production loads.');
            }
            if (candidate.composites.learningVelocity < 55) {
                risks.push('Learning velocity below target for rapid ramp expectations.');
            }
            if (risks.length === 0) {
                return ['No primary risks flagged; validate role-specific exposure and safety compliance.'];
            }
            return risks.slice(0, 3);
        }

        function getBestUseOfCandidate(candidate) {
            const primaryRoleId = getRoleRankings(candidate)[0]?.role?.id;
            const bestUseByRole = {
                'quality-metrology': 'Lead CMM programming and first-article inspection; drive gage R&R, SPC calls, and containment when drift appears.',
                'cnc-machinist': 'Deploy on 5-axis machining cells for complex geometries; own setup validation, tool offsets, and in-process inspection.',
                'cnc-programmer': 'Own CAM toolpath development and post-processor validation; partner on fixture strategy and cycle-time optimization.',
                'mfg-systems': 'Stabilize machining and inspection cells line-side; handle fault isolation, fixture health, and repeatability checks.',
                'production-assembly': 'Execute high-mix assembly with strict work instructions and quality gates; reliable for detail-critical builds.',
                'automation-robotics': 'Support robot cell programming, recovery, and fault isolation for automated transfer and inspection.',
                'mfg-engineer': 'Bridge process planning and production execution; optimize setups, tolerance stackups, and quality escape prevention.'
            };
            return bestUseByRole[primaryRoleId] ||
                'Deploy across CNC and metrology workflows where precision, repeatability, and disciplined inspection are required.';
        }

        function renderExecutiveSummary(summary) {
            return `
                <div class="chart-container executive-summary">
                    <h3 class="chart-title">Executive Summary</h3>
                    <div class="summary-grid">
                        ${renderSummaryRow('Recommendation', summary.recommendation)}
                        ${renderSummaryRow('Primary Role Fit', summary.primaryRoleFit)}
                        ${renderSummaryRow('Ramp Projection', summary.rampProjection)}
                        ${renderSummaryRow('Primary Risks', summary.primaryRisks)}
                        ${renderSummaryRow('Ideal Manager / Environment', summary.idealManager)}
                        ${renderSummaryRow('Next Steps', summary.nextSteps)}
                    </div>
                </div>
            `;
        }

        function renderSummaryRow(label, value) {
            const valueHtml = Array.isArray(value) ?
                `<div class="summary-value"><ul class="summary-list">${value.map(item => `<li>${item}</li>`).join('')}</ul></div>` :
                `<div class="summary-value">${value}</div>`;
            return `
                <div class="summary-row">
                    <div class="summary-label">${label}</div>
                    ${valueHtml}
                </div>
            `;
        }

        function renderRoleFitMapping(candidate, roleRankings, selectedRoleId, roleInsights) {
            const primaryId = roleRankings[0]?.role?.id;
            const secondaryId = roleRankings[1]?.role?.id;
            return `
                <div class="chart-container role-fit-mapping">
                    <h3 class="chart-title">Intended Role</h3>
                    <div class="role-selector">
                        <label class="control-label" for="intended-role-select">Intended Role</label>
                        <select id="intended-role-select">
                            ${DETAIL_ROLE_OPTIONS.map(option => `
                                <option value="${option.id}" ${option.id === selectedRoleId ? 'selected' : ''}>${option.name}</option>
                            `).join('')}
                        </select>
                    </div>
                    <div class="summary-grid role-fit-grid">
                        ${renderSummaryRow('Role Fit', roleInsights.rating)}
                        ${renderSummaryRow('Why', roleInsights.why)}
                        ${renderSummaryRow('Conditions for Success', roleInsights.conditions)}
                        ${renderSummaryRow('Watch-outs', roleInsights.watchouts)}
                    </div>
                    <div class="role-fit-text">Adjacent roles with strong alignment:</div>
                    <div class="role-chips">
                        ${ROLES.map(role => `<span class="role-chip ${role.id === primaryId || role.id === secondaryId ? 'primary' : ''}">${role.name}</span>`).join('')}
                    </div>
                </div>
            `;
        }

        function renderRadarCallouts(roleInsights) {
            const strengths = roleInsights.strengths.map(s => s.construct.name).join(', ') || 'No standout strengths identified';
            const risks = roleInsights.riskZones.map(r => r.construct.name).join(', ') || 'No material risk zones identified';
            return `
                <div class="radar-callouts">
                    <div class="radar-callout">
                        <div class="callout-label">Top strengths</div>
                        <div class="callout-value">${strengths}</div>
                    </div>
                    <div class="radar-callout">
                        <div class="callout-label">Risk zones</div>
                        <div class="callout-value">${risks}</div>
                    </div>
                    <div class="radar-callout">
                        <div class="callout-label">Benchmark reference</div>
                        <div class="callout-value">Top-quartile performers</div>
                    </div>
                </div>
            `;
        }

        function renderRadarLegend() {
            const legendItems = [
                {
                    id: 'cognitive',
                    title: 'Cognitive Core',
                    measures: 'Core cognitive abilities that determine learning speed, decision quality, error avoidance, and long-term performance ceiling.',
                    predicts: 'Training speed, crisis judgment, analytic rigor, and recovery resilience.'
                },
                {
                    id: 'technical',
                    title: 'Technical Aptitude',
                    measures: 'How well a candidate thinks and operates inside real, constrained technical systems.',
                    predicts: 'Execution quality, troubleshooting speed, and operational reliability.'
                },
                {
                    id: 'integrity',
                    title: 'Behavioral Integrity & Mission Alignment',
                    measures: 'Behavior under constraint, not personality.',
                    predicts: 'Trustworthiness, retention, and alignment with high-stakes missions.'
                }
            ];

            return `
                <div class="radar-legend">
                    ${legendItems.map(item => `
                        <div class="radar-legend-item">
                            <div class="radar-legend-header">
                                <span class="radar-legend-swatch ${item.id}"></span>
                                <div class="radar-legend-title">${item.title}</div>
                            </div>
                            <div class="radar-legend-text">Measures: ${item.measures}</div>
                            <div class="radar-legend-text">Predicts: ${item.predicts}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function getValidationItems(candidate, roleId, roleInsights) {
            const cutline = ROLE_CUTLINES[roleId];
            const constructs = (cutline?.requirements || [])
                .filter(req => req.construct)
                .map(req => getConstructById(req.construct))
                .filter(Boolean);
            const fallback = roleInsights?.strengths?.map(item => item.construct).filter(Boolean) || [];
            const unique = [...constructs, ...fallback].filter((construct, index, arr) => arr.findIndex(c => c.id === construct.id) === index);
            const selected = unique.slice(0, 3);

            return selected.map(construct => ({
                title: construct.name,
                validate: construct.measures.replace(/\.$/, ''),
                why: construct.matters,
                prompt: `Describe a recent time you had to ${construct.predicts.toLowerCase()}. What did you check first?`,
                positive: `Uses a clear method and verification steps tied to ${construct.predicts.toLowerCase()}.`,
                watch: `Skips verification or relies on assumptions despite ${construct.predicts.toLowerCase()}.`
            }));
        }

        function renderValidationRow(label, value) {
            return `
                <div class="validation-row">
                    <div class="validation-label">${label}</div>
                    <div class="validation-value">${value}</div>
                </div>
            `;
        }

        function renderValidationProtocol(items, roleId) {
            const roleName = getRoleDisplayName(roleId);
            return `
                <div class="chart-container detail-section validation-protocol">
                    <h3 class="chart-title">Targeted Validation Protocol</h3>
                    <div class="validation-role">Aligned to ${roleName}</div>
                    <div class="validation-list">
                        ${items.map(item => `
                            <div class="validation-item">
                                <div class="validation-item-title">${item.title}</div>
                                ${renderValidationRow('What to Validate', item.validate)}
                                ${renderValidationRow('Why It Matters for the Selected Role', item.why)}
                                ${renderValidationRow('Validation Prompt', item.prompt)}
                                ${renderValidationRow('Positive Signal', item.positive)}
                                ${renderValidationRow('Watch Signal', item.watch)}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function getOnboardingPlan(candidate, roleId, roleInsights) {
            const roleName = getRoleDisplayName(roleId);
            const strength = roleInsights.strengths[0]?.construct?.name || 'core technical reasoning';
            const risk = roleInsights.riskZones[0]?.construct?.name || 'reliability under load';

            const managerGuidance = [
                candidate.composites.learningVelocity >= 70 ?
                    'Fast feedback cadence with stretch tasks after early wins.' :
                    'Structured ramp with explicit sequencing and quality gates.',
                candidate.composites.reliability >= 70 ?
                    'Autonomy once SOP compliance is stable and repeatable.' :
                    'Frequent check-ins with escalation expectations and peer verification.'
            ];

            const onboardingWeeks = [
                { label: 'Week 1', text: `Shadow ${roleName} workflows and review safety, SOP, and ${strength.toLowerCase()} tasks.` },
                { label: 'Week 2', text: `Guided execution with supervisor sign-off; emphasize ${risk.toLowerCase()} checks.` },
                { label: 'Week 3', text: 'Independent runs with daily QA review and structured error-recovery drills.' },
                { label: 'Week 4', text: 'Own a full setup cycle and document corrective actions with minimal supervision.' }
            ];

            const successMetrics = [
                'First-pass yield holds at or above team baseline.',
                'SOP and quality gate adherence remains consistent across shifts.',
                'Ramp velocity meets role expectations with declining rework.'
            ];

            return { roleName, managerGuidance, onboardingWeeks, successMetrics };
        }

        function renderOnboardingPlan(plan, roleId) {
            return `
                <div class="chart-container detail-section onboarding-plan">
                    <h3 class="chart-title">Onboarding & Deployment Plan</h3>
                    <div class="onboarding-grid">
                        <div class="onboarding-block">
                            <div class="onboarding-title">Manager Guidance</div>
                            <ul class="summary-list">
                                ${plan.managerGuidance.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="onboarding-block">
                            <div class="onboarding-title">30-Day Onboarding Plan</div>
                            <div class="onboarding-weeks">
                                ${plan.onboardingWeeks.map(week => `
                                    <div class="onboarding-week">
                                        <div class="week-label">${week.label}</div>
                                        <div class="week-text">${week.text}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="onboarding-block">
                            <div class="onboarding-title">Early Success Metrics</div>
                            <ul class="summary-list">
                                ${plan.successMetrics.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function getQuartileThreshold(scores) {
            if (!scores.length) return 0;
            const sorted = [...scores].sort((a, b) => a - b);
            const index = Math.floor(0.75 * (sorted.length - 1));
            return sorted[index];
        }

        function getBenchmarkComparison(candidate, roleId) {
            const cohortScores = state.candidates.map(c => c.composites.aci);
            const higher = cohortScores.filter(score => score > candidate.composites.aci).length;
            const rank = higher + 1;
            const total = cohortScores.length;
            const topPercent = Math.max(1, Math.round((rank / total) * 100));

            const cutline = ROLE_CUTLINES[roleId];
            let passes = 0;
            let totalReq = 0;
            const gaps = [];
            if (cutline) {
                cutline.requirements.forEach(req => {
                    totalReq += 1;
                    const score = req.construct ? candidate.scores[req.construct] : candidate.composites[req.composite];
                    const percentile = scoreToPercentile(score);
                    if (percentile >= req.threshold) {
                        passes += 1;
                    } else {
                        const label = req.construct ?
                            (getConstructById(req.construct)?.name || req.construct) :
                            (COMPOSITE_LABELS[req.composite] || req.composite.replace(/([A-Z])/g, ' $1').trim());
                        gaps.push(label);
                    }
                });
            }

            const learningThreshold = getQuartileThreshold(state.candidates.map(c => c.composites.learningVelocity));
            const reliabilityThreshold = getQuartileThreshold(state.candidates.map(c => c.composites.reliability));

            return {
                rank,
                total,
                topPercent,
                passes,
                totalReq,
                gaps: gaps.slice(0, 2),
                learningVelocity: candidate.composites.learningVelocity,
                reliability: candidate.composites.reliability,
                learningThreshold,
                reliabilityThreshold
            };
        }

        function renderBenchmarkComparison(benchmark, roleId) {
            const alignment = benchmark.totalReq ?
                `Meets ${benchmark.passes} of ${benchmark.totalReq} thresholds${benchmark.gaps.length ? `; gaps: ${benchmark.gaps.join(', ')}` : ''}.` :
                'Role thresholds unavailable.';
            const rampRelative = benchmark.learningVelocity >= benchmark.learningThreshold ? 'above' : 'below';
            const reliabilityRelative = benchmark.reliability >= benchmark.reliabilityThreshold ? 'above' : 'below';
            return `
                <div class="chart-container detail-section benchmark-comparison">
                    <h3 class="chart-title">Benchmark / Cohort Comparison</h3>
                    <div class="benchmark-grid">
                        <div class="benchmark-item">
                            <div class="benchmark-label">Standing vs assessed cohort</div>
                            <div class="benchmark-value">Top ${benchmark.topPercent}% (rank ${benchmark.rank} of ${benchmark.total})</div>
                        </div>
                        <div class="benchmark-item">
                            <div class="benchmark-label">Alignment vs role benchmark thresholds</div>
                            <div class="benchmark-value">${alignment}</div>
                        </div>
                        <div class="benchmark-item">
                            <div class="benchmark-label">Relative ramp and reliability vs top performers</div>
                            <div class="benchmark-value">Learning velocity ${rampRelative} top-quartile; reliability ${reliabilityRelative} top-quartile performers.</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDomainSection(domain) {
            return `
                <div class="chart-container domain-card">
                    <div class="domain-header">
                        <div class="domain-title">${domain.title}</div>
                        <div class="domain-purpose">${domain.purpose}</div>
                    </div>
                    <div class="domain-table">
                        <div class="domain-row header">
                            <div class="domain-cell">Subtest</div>
                            <div class="domain-cell">What it measures</div>
                            <div class="domain-cell">Predicts</div>
                            <div class="domain-cell">${domain.valueLabel}</div>
                        </div>
                        ${domain.constructs.map(c => `
                            <div class="domain-row">
                                <div class="domain-cell domain-name">${c.name} (${c.id})</div>
                                <div class="domain-cell">${c.measures}</div>
                                <div class="domain-cell">${c.predicts}</div>
                                <div class="domain-cell">${c.operationalValue}</div>
                            </div>
                        `).join('')}
                    </div>
                    ${domain.summary ? `<div class="domain-summary">${domain.summary}</div>` : ''}
                </div>
            `;
        }

        function renderConstructSection(sectionId, title, constructs, candidate) {
            const isExpanded = state.expandedSections[sectionId];
            return `
                <div class="construct-section ${isExpanded ? 'expanded' : ''}" data-section="${sectionId}">
                    <div class="construct-section-header" tabindex="0" role="button" aria-expanded="${isExpanded}">
                        <div class="construct-section-title">
                            ${title}
                            <span class="construct-section-count">${constructs.length} constructs</span>
                        </div>
                        <span class="construct-section-toggle">â–¼</span>
                    </div>
                    <div class="construct-cards">
                        ${constructs.map(c => renderConstructCard(c, candidate)).join('')}
                    </div>
                </div>
            `;
        }

        function renderConstructCard(construct, candidate) {
            const score = candidate.scores[construct.id];
            const percentile = scoreToPercentile(score);
            const band = getBand(percentile);
            const ci = getConfidenceInterval(score);
            const isExpanded = state.expandedConstructs[construct.id];
            const evidence = EVIDENCE_DATA[construct.id] || getDefaultEvidence(construct);

            return `
                <div class="construct-card ${isExpanded ? 'evidence-open' : ''}" data-construct="${construct.id}">
                    <div class="construct-card-header">
                        <div class="construct-info">
                            <div class="construct-name">
                                ${construct.name}
                                <span class="construct-abbr">${construct.id}</span>
                            </div>
                            <div class="construct-measures">Measures: ${construct.measures}</div>
                            <div class="construct-predicts">Predicts: ${construct.predicts}</div>
                            <div class="construct-operational">Operational value: ${construct.operationalValue}</div>
                        </div>
                        <div class="construct-scores">
                            <div class="construct-score-secondary">
                                <div class="construct-percentile">${ordinal(percentile)} %ile</div>
                                <div class="construct-ci">${ci}</div>
                            </div>
                            <div class="construct-score-main">
                                <div class="construct-score-value text-${band.class}">${score}</div>
                                <div class="construct-score-label">${band.label}</div>
                            </div>
                            <button class="construct-expand-btn" aria-label="Show evidence">
                                ${isExpanded ? 'âˆ’' : '+'}
                            </button>
                        </div>
                    </div>
                    <div class="construct-evidence">
                        <div class="evidence-section">
                            <div class="evidence-label">Scenario</div>
                            <div class="evidence-scenario">${evidence.scenario}</div>
                        </div>
                        <div class="evidence-section">
                            <div class="evidence-label">Transcript Excerpt</div>
                            <div class="evidence-transcript">
                                ${evidence.transcript.map(turn => `
                                    <div class="transcript-turn">
                                        <div class="transcript-speaker ${turn.speaker}">${turn.speaker === 'system' ? 'System' : 'Candidate'}</div>
                                        <div class="transcript-content">${turn.content}</div>
                                        <div class="transcript-timestamp">${turn.time}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="evidence-section">
                            <div class="evidence-label">Scoring Rationale</div>
                            <div class="evidence-rationale">${evidence.rationale}</div>
                        </div>
                        <div class="evidence-section">
                            <div class="evidence-label">Conditions</div>
                            <div class="evidence-indicators">
                                <div class="indicator-item">
                                    <span class="indicator-dot ${evidence.indicators.timePressure}"></span>
                                    Time Pressure: ${evidence.indicators.timePressure}
                                </div>
                                <div class="indicator-item">
                                    <span class="indicator-dot ${evidence.indicators.interruptions}"></span>
                                    Interruptions: ${evidence.indicators.interruptions}
                                </div>
                                <div class="indicator-item">
                                    <span class="indicator-dot ${evidence.indicators.ambiguity}"></span>
                                    Ambiguity: ${evidence.indicators.ambiguity}
                                </div>
                            </div>
                        </div>
                        <div class="evidence-section">
                            <div class="evidence-label">Development Guidance</div>
                            <ul class="evidence-list">
                                ${construct.development.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="evidence-section">
                            <div class="standardization-note">
                                AI adapts difficulty and pacing to candidate ability. Scoring constructs remain fixed across all candidates.
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function setupConstructListeners() {
            document.querySelectorAll('.construct-section-header').forEach(header => {
                header.addEventListener('click', () => {
                    const section = header.parentElement;
                    const sectionId = section.dataset.section;
                    state.expandedSections[sectionId] = !state.expandedSections[sectionId];
                    section.classList.toggle('expanded');
                    header.setAttribute('aria-expanded', state.expandedSections[sectionId]);
                });
                header.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        header.click();
                    }
                });
            });

            document.querySelectorAll('.construct-card-header').forEach(header => {
                header.addEventListener('click', () => {
                    const card = header.parentElement;
                    const constructId = card.dataset.construct;
                    state.expandedConstructs[constructId] = !state.expandedConstructs[constructId];
                    card.classList.toggle('evidence-open');
                    const btn = header.querySelector('.construct-expand-btn');
                    if (btn) btn.textContent = state.expandedConstructs[constructId] ? 'âˆ’' : '+';
                });
            });
        }

        // ============================================================
        // RADAR CHART
        // ============================================================

        function renderRadarChart(candidate) {
            const container = document.getElementById('radar-chart');
            if (!container) return;

            const CONSTRUCT_TOOLTIP_COPY = {
                FI: {
                    title: 'Fluid Intelligence (FI)',
                    body: 'How quickly someone can understand new problems and learn complex systems without needing repeated instruction.'
                },
                ER: {
                    title: 'Extrapolational Reasoning (ER)',
                    body: 'Ability to see what is likely to happen next and act before small issues become major failures.'
                },
                ICI: {
                    title: 'Cognitive Inhibition / Interference Control (ICI)',
                    body: 'Ability to pause, double check, and avoid wrong actions when under time pressure or stress.'
                },
                MAC: {
                    title: 'Metacognitive Accuracy (MAC)',
                    body: 'Ability to accurately judge what they know and when to ask for help, avoiding dangerous overconfidence.'
                },
                TCDQ: {
                    title: 'Time-Compressed Decision Quality (TCDQ)',
                    body: 'Ability to make correct decisions even when time is limited and stakes are high.'
                },
                CMR: {
                    title: 'Causal Misattribution Resistance (CMR)',
                    body: 'Ability to diagnose problems based on evidence rather than assumptions or false explanations.'
                },
                ERCS: {
                    title: 'Error Recovery & Correction Speed (ERCS)',
                    body: 'Ability to quickly recognize a mistake, change course, and restore operations.'
                },
                SRD: {
                    title: 'Systems Reasoning & Diagnostics (SRD)',
                    body: 'Ability to understand how complex systems work together and trace problems to their true root cause.'
                },
                PRAD: {
                    title: 'Pattern Recognition & Anomaly Detection (PRAD)',
                    body: 'Ability to notice subtle issues or irregularities that others miss in noisy or data-heavy environments.'
                },
                TMAQ: {
                    title: 'Technical Math & Quant Reasoning (TMAQ)',
                    body: 'Ability to understand tolerances, measurements, and how small errors can create large downstream problems.'
                },
                DLCT: {
                    title: 'Digital Logic & Computational Thinking (DLCT)',
                    body: 'Ability to understand and troubleshoot automated systems, logic flows, and machine behavior.'
                },
                SPV: {
                    title: 'Spatial & Process Visualization (SPV)',
                    body: 'Ability to mentally visualize physical systems, workflows, and 3D environments accurately.'
                },
                ASWL: {
                    title: 'Attention Stability Under Load (ASWL)',
                    body: 'Ability to maintain focus, accuracy, and consistency during long shifts or high intensity work.'
                },
                FIDS: {
                    title: 'Fault Isolation & Debug Speed (FIDS)',
                    body: 'Ability to quickly isolate the real source of a failure in complex or noisy conditions.'
                },
                ISI: {
                    title: 'Information Security Instinct (ISI)',
                    body: 'Natural awareness of digital risks and ability to avoid unsafe or careless security behavior.'
                },
                RRCP: {
                    title: 'Reliability & Rules Compliance (RRCP)',
                    body: 'Ability to consistently follow procedures and safety rules even under pressure or urgency.'
                },
                VCS: {
                    title: 'Values Conflict Scenarios (VCS)',
                    body: 'How someone makes decisions when safety, ethics, or rules are in conflict with speed or convenience.'
                },
                BCC: {
                    title: 'Behavioral Consistency Cross-Check (BCC)',
                    body: 'Whether someone remains honest and consistent over time rather than gaming the system.'
                },
                MAI: {
                    title: 'Mission Alignment Indicator (MAI)',
                    body: 'Whether someoneâ€™s personal values align with high responsibility, long term mission driven work.'
                }
            };

            const constructs = [...CONSTRUCTS.cognitive, ...CONSTRUCTS.technical, ...CONSTRUCTS.integrity];
            const scores = constructs.map(c => candidate.scores[c.id]);
            const labels = constructs.map(c => c.id);
            const cognitiveCount = CONSTRUCTS.cognitive.length;
            const technicalCount = CONSTRUCTS.technical.length;

            const width = 320;
            const height = 320;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = 120;
            const levels = 4;

            let svg = `<svg viewBox="0 0 ${width} ${height}" width="${width}" height="${height}" role="img" aria-label="Radar chart">`;

            for (let level = 1; level <= levels; level++) {
                const levelRadius = (radius / levels) * level;
                const points = [];
                for (let i = 0; i < constructs.length; i++) {
                    const angle = (Math.PI * 2 * i) / constructs.length - Math.PI / 2;
                    const x = centerX + Math.cos(angle) * levelRadius;
                    const y = centerY + Math.sin(angle) * levelRadius;
                    points.push(`${x},${y}`);
                }
                svg += `<polygon points="${points.join(' ')}" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>`;
            }

            for (let i = 0; i < constructs.length; i++) {
                const angle = (Math.PI * 2 * i) / constructs.length - Math.PI / 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                const construct = constructs[i];
                const category = i < cognitiveCount ? 'cognitive' : i < cognitiveCount + technicalCount ? 'technical' : 'integrity';
                svg += `<line x1="${centerX}" y1="${centerY}" x2="${x}" y2="${y}" class="radar-axis category-${category}"/>`;

                const labelRadius = radius + 16;
                const labelX = centerX + Math.cos(angle) * labelRadius;
                const labelY = centerY + Math.sin(angle) * labelRadius;
                const textAnchor = Math.abs(Math.cos(angle)) < 0.1 ? 'middle' :
                                   Math.cos(angle) > 0 ? 'start' : 'end';
                svg += `<text x="${labelX}" y="${labelY}" text-anchor="${textAnchor}" font-size="9" font-family="var(--font-mono)" dominant-baseline="middle" class="radar-label category-${category}" data-construct-index="${i}">${labels[i]}</text>`;
            }

            const dataPoints = [];
            for (let i = 0; i < constructs.length; i++) {
                const angle = (Math.PI * 2 * i) / constructs.length - Math.PI / 2;
                const value = scores[i] / 100;
                const x = centerX + Math.cos(angle) * radius * value;
                const y = centerY + Math.sin(angle) * radius * value;
                dataPoints.push(`${x},${y}`);
            }

            svg += `<polygon points="${dataPoints.join(' ')}" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>`;

            for (let i = 0; i < constructs.length; i++) {
                const angle = (Math.PI * 2 * i) / constructs.length - Math.PI / 2;
                const value = scores[i] / 100;
                const x = centerX + Math.cos(angle) * radius * value;
                const y = centerY + Math.sin(angle) * radius * value;
                const category = i < cognitiveCount ? 'cognitive' : i < cognitiveCount + technicalCount ? 'technical' : 'integrity';
                svg += `<circle cx="${x}" cy="${y}" r="3" class="radar-point category-${category}"/>`;
            }

            svg += '</svg>';
            container.innerHTML = svg;

            let tooltip = container.querySelector('.radar-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.className = 'radar-tooltip';
                tooltip.setAttribute('aria-hidden', 'true');
                container.appendChild(tooltip);
            }

            const positionTooltip = (event) => {
                const containerRect = container.getBoundingClientRect();
                const tooltipRect = tooltip.getBoundingClientRect();
                let left = event.clientX - containerRect.left + 12;
                let top = event.clientY - containerRect.top + 12;

                if (left + tooltipRect.width > containerRect.width) {
                    left = event.clientX - containerRect.left - tooltipRect.width - 12;
                }

                if (top + tooltipRect.height > containerRect.height) {
                    top = event.clientY - containerRect.top - tooltipRect.height - 12;
                }

                tooltip.style.left = `${Math.max(8, left)}px`;
                tooltip.style.top = `${Math.max(8, top)}px`;
            };

            container.querySelectorAll('.radar-label').forEach(label => {
                label.addEventListener('mouseenter', (event) => {
                    const index = Number(event.currentTarget.dataset.constructIndex);
                    const construct = constructs[index];
                    if (!construct) return;
                    const copy = CONSTRUCT_TOOLTIP_COPY[construct.id];
                    if (!copy) return;
                    tooltip.innerHTML = `
                        <div class="radar-tooltip-title">${copy.title}</div>
                        <div class="radar-tooltip-body">${copy.body}</div>
                    `;
                    tooltip.style.opacity = '1';
                    positionTooltip(event);
                });

                label.addEventListener('mousemove', positionTooltip);

                label.addEventListener('mouseleave', () => {
                    tooltip.style.opacity = '0';
                });
            });
        }

        // ============================================================
        // CUTLINES VIEW
        // ============================================================

        function renderCutlines() {
            const container = document.getElementById('cutlines-content');

            let html = `
                <div class="cutlines-container">
                    <div class="cutlines-roles">
                        ${ROLES.map(role => {
                            const meetCount = state.candidates.filter(c => meetsCutline(c, role.id)).length;
                            return `
                                <div class="cutlines-role-item ${state.selectedRole === role.id ? 'selected' : ''}" data-role="${role.id}" tabindex="0">
                                    <div class="cutlines-role-name">${role.name}</div>
                                    <div class="cutlines-role-count">${meetCount} of ${state.candidates.length} qualify</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div class="cutlines-detail">
                        ${renderCutlineDetail()}
                    </div>
                </div>
            `;

            container.innerHTML = html;

            container.querySelectorAll('.cutlines-role-item').forEach(item => {
                item.addEventListener('click', () => {
                    state.selectedRole = item.dataset.role;
                    renderCutlines();
                });
                item.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        state.selectedRole = item.dataset.role;
                        renderCutlines();
                    }
                });
            });

            container.querySelectorAll('.cutline-candidate-row').forEach(row => {
                row.addEventListener('click', () => {
                    setState({ currentView: 'candidate-detail', selectedCandidate: row.dataset.candidate });
                });
            });
        }

        function renderCutlineDetail() {
            const cutline = ROLE_CUTLINES[state.selectedRole];
            const role = ROLES.find(r => r.id === state.selectedRole);

            if (!cutline || !role) return '<p>Select a role to view cutlines.</p>';

            let html = `
                <h3>${role.name}</h3>
                <div class="cutlines-requirements">
                    <div class="evidence-label" style="margin-top: 24px;">Requirements</div>
                    ${cutline.requirements.map(req => {
                        const label = req.construct ?
                            (CONSTRUCTS.cognitive.find(c => c.id === req.construct) ||
                             CONSTRUCTS.technical.find(c => c.id === req.construct) ||
                             CONSTRUCTS.integrity.find(c => c.id === req.construct))?.name || req.construct :
                            (COMPOSITE_LABELS[req.composite] || req.composite.replace(/([A-Z])/g, ' $1').trim());
                        return `
                            <div class="requirement-item">
                                <span class="requirement-construct">${label}</span>
                                <span class="requirement-threshold">â‰¥ ${ordinal(req.threshold)}</span>
                            </div>
                        `;
                    }).join('')}
                </div>
                <div class="cutlines-candidates">
                    <div class="evidence-label">Candidates</div>
                    ${state.candidates.map(c => {
                        const passes = meetsCutline(c, state.selectedRole);
                        return `
                            <div class="cutline-candidate-row" data-candidate="${c.id}">
                                <div class="cutline-candidate-info">
                                    <div class="cutline-status-icon ${passes ? 'pass' : 'fail'}">
                                        ${passes ? 'âœ“' : 'â€”'}
                                    </div>
                                    <div class="cutline-candidate-name">${c.name}</div>
                                </div>
                                <div class="cutline-score">${c.composites.aci}</div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;

            const firstMatch = state.candidates.find(c => meetsCutline(c, state.selectedRole));
            if (firstMatch) {
                html += renderFitExplanation(firstMatch, state.selectedRole);
            }

            return html;
        }

        function renderFitExplanation(candidate, roleId) {
            const drivers = [];
            const risks = [];
            const allConstructs = [...CONSTRUCTS.cognitive, ...CONSTRUCTS.technical, ...CONSTRUCTS.integrity];

            const constructScores = allConstructs.map(c => ({
                construct: c,
                score: candidate.scores[c.id],
                percentile: scoreToPercentile(candidate.scores[c.id])
            }));

            constructScores.sort((a, b) => b.percentile - a.percentile);

            constructScores.slice(0, 3).forEach(cs => {
                drivers.push(`${cs.construct.name} (${ordinal(cs.percentile)}) â€” ${cs.construct.predicts.toLowerCase()}`);
            });

            constructScores.slice(-3).forEach(cs => {
                if (cs.percentile < 60) {
                    risks.push(`${cs.construct.name} (${ordinal(cs.percentile)}) may require support`);
                }
            });

            if (risks.length === 0) {
                risks.push('No significant risks identified');
            }

            return `
                <div class="fit-explanation">
                    <div class="fit-title">Fit Analysis: ${candidate.name}</div>
                    <div class="fit-section">
                        <div class="fit-section-label">Strengths</div>
                        ${drivers.map(d => `
                            <div class="fit-item driver">
                                <span class="icon">â†‘</span>
                                <span>${d}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="fit-section">
                        <div class="fit-section-label">Considerations</div>
                        ${risks.map(r => `
                            <div class="fit-item risk">
                                <span class="icon">â†’</span>
                                <span>${r}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // ============================================================
        // HEATMAP VIEW
        // ============================================================

        function renderHeatmap() {
            const container = document.getElementById('heatmap-content');
            const candidates = getFilteredCandidates();
            const allConstructs = [...CONSTRUCTS.cognitive, ...CONSTRUCTS.technical, ...CONSTRUCTS.integrity];

            function getHeatColor(percentile) {
                if (percentile >= 85) return 'background: rgba(255,255,255,0.2); color: #fff;';
                if (percentile >= 70) return 'background: rgba(255,255,255,0.12); color: rgba(255,255,255,0.9);';
                if (percentile >= 55) return 'background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.7);';
                if (percentile >= 40) return 'background: rgba(255,255,255,0.02); color: rgba(255,255,255,0.5);';
                return 'background: transparent; color: rgba(255,255,255,0.3);';
            }

            let html = `
                <div class="chart-container" style="margin-bottom: 40px;">
                    <h3 class="chart-title">Construct Scores</h3>
                    <div class="heatmap-container">
                        <table class="heatmap-table">
                            <thead>
                                <tr>
                                    <th style="text-align: left; padding-left: 16px;">Candidate</th>
                                    ${allConstructs.map(c => `<th class="rotate">${c.id}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${candidates.map(cand => `
                                    <tr>
                                        <td class="candidate-col">${cand.name}</td>
                                        ${allConstructs.map(c => {
                                            const score = cand.scores[c.id];
                                            const percentile = scoreToPercentile(score);
                                            return `<td class="heatmap-cell" style="${getHeatColor(percentile)}">${score}</td>`;
                                        }).join('')}
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title">Role Qualification</h3>
                    <div class="heatmap-container">
                        <table class="heatmap-table">
                            <thead>
                                <tr>
                                    <th style="text-align: left; padding-left: 16px;">Candidate</th>
                                    ${ROLES.map(r => `<th class="rotate">${r.abbr}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${candidates.map(cand => `
                                    <tr>
                                        <td class="candidate-col">${cand.name}</td>
                                        ${ROLES.map(role => {
                                            const passes = meetsCutline(cand, role.id);
                                            const style = passes ?
                                                'background: rgba(255,255,255,0.1); color: var(--text-primary);' :
                                                'color: rgba(255,255,255,0.2);';
                                            return `<td class="heatmap-cell" style="${style}">${passes ? 'âœ“' : 'â€”'}</td>`;
                                        }).join('')}
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;

            container.innerHTML = html;
        }

        // ============================================================
        // EVENT HANDLERS
        // ============================================================

        function initEventListeners() {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const view = tab.dataset.view;
                    setState({ currentView: view, selectedCandidate: null });
                });
                tab.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        tab.click();
                    }
                });
            });

            document.getElementById('back-to-candidates').addEventListener('click', () => {
                setState({ currentView: 'candidates', selectedCandidate: null });
            });

            document.getElementById('sort-select').addEventListener('change', (e) => {
                setState({ sortBy: e.target.value });
            });

            document.getElementById('role-filter').addEventListener('change', (e) => {
                setState({ roleFilter: e.target.value });
            });

            document.getElementById('cutline-filter').addEventListener('change', (e) => {
                setState({ cutlineFilter: e.target.checked });
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && state.currentView === 'candidate-detail') {
                    setState({ currentView: 'candidates', selectedCandidate: null });
                }
            });
        }

        // ============================================================
        // INITIALIZATION
        // ============================================================

        function init() {
            initEventListeners();
            render();
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

    })();
    </script>
</body>
</html>
